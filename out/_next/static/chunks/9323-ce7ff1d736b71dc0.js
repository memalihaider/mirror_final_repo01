"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9323],{56104:(e,r,t)=>{t.d(r,{AU:()=>b,Gg:()=>g,IG:()=>d,db:()=>l,j2:()=>f});var a=t(23915),n=t(71906),i=t(35317),o=t(77505),s=t(24903);let u={apiKey:"AIzaSyBYQA66rKOPrb4kce-hYCTYAbGKanVGbZ8",authDomain:"mirrorsbeautylounge-7c5ff.firebaseapp.com",projectId:"mirrorsbeautylounge-7c5ff",storageBucket:"mirrorsbeautylounge-7c5ff.firebasestorage.app",messagingSenderId:"1029530532506",appId:"1:1029530532506:web:2fa18cc521b2524e5afd23",measurementId:"G-GMWQSDP9JW"},c=null,l=null,d=null,f=null;function b(){if(!c)try{c=(0,a.initializeApp)(u),l=(0,i.aU)(c),d=(0,o.c7)(c),f=(0,s.getAuth)(c);try{(0,n.P5)(c)}catch(e){console.warn("Firebase Analytics initialization failed:",e)}}catch(e){console.error("Firebase initialization failed:",e),f=null}}function g(){return null!==c}b()},79323:(e,r,t)=>{t.d(r,{BP:()=>o,Bh:()=>l,eg:()=>s,nW:()=>d,uG:()=>u,yN:()=>f,yS:()=>c});var a=t(24903),n=t(35317),i=t(56104);let o=async()=>{try{if(!i.j2)return{error:"Firebase auth is not initialized"};return await (0,a.signOut)(i.j2),{error:null}}catch(e){return{error:e instanceof Error?e.message:"Unknown error"}}},s=async e=>{try{if(!i.j2)return{error:"Firebase auth is not initialized"};if(i.j2.currentUser){if(await (0,a.updateProfile)(i.j2.currentUser,{displayName:e}),!i.db)throw Error("Firestore is not initialized");let r=(0,n.H9)(i.db,"users",i.j2.currentUser.uid);await (0,n.mZ)(r,{displayName:e,updatedAt:new Date})}return{error:null}}catch(e){return console.error("Error updating profile:",e),{error:e instanceof Error?e.message:"Unknown error"}}},u=async e=>{try{if(!i.db)throw Error("Firestore is not initialized");let a=await (0,n.x7)((0,n.H9)(i.db,"users",e));if(a.exists()){var r,t;let e=a.data();return{...e,accessPages:e.accessPages||[],createdAt:(null==(r=e.createdAt)?void 0:r.toDate)?e.createdAt.toDate():new Date(e.createdAt),updatedAt:(null==(t=e.updatedAt)?void 0:t.toDate)?e.updatedAt.toDate():new Date(e.updatedAt)}}return null}catch(e){return console.error("Error getting user role:",e),null}},c=async function(e,r,t,a){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];try{let s={uid:e,email:r,displayName:a,role:t,accessPages:o,createdAt:new Date,updatedAt:new Date};if(!i.db)throw Error("Firestore is not initialized");return await (0,n.BN)((0,n.H9)(i.db,"users",e),s),{error:null}}catch(e){return{error:e instanceof Error?e.message:"Unknown error"}}},l=e=>i.j2?(0,a.hg)(i.j2,e):(console.warn("Firebase auth is not initialized. Authentication state changes will not be tracked."),()=>{}),d=async()=>{try{if(!i.j2)return{success:!1,error:"Firebase auth is not initialized"};console.log("Creating admin user: admin@mirrorbeauty.com");let e=await (0,a.createUserWithEmailAndPassword)(i.j2,"admin@mirrorbeauty.com","admin123");return await (0,a.updateProfile)(e.user,{displayName:"Admin User"}),await c(e.user.uid,"admin@mirrorbeauty.com","admin","Admin User",["dashboard","bookings","branches","offers","customers","users","profile","staff","services","chat","categories"]),console.log("Admin user created successfully"),{success:!0,error:null}}catch(e){return console.error("Error creating admin user:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}},f=async function(e,r,a,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];try{if(console.log("Creating new user:",e),!(null===i.j2||void 0===i.j2?void 0:i.j2.currentUser))return{success:!1,error:"No authenticated user found"};let{initializeApp:s}=await Promise.resolve().then(t.bind(t,23915)),{getAuth:u,createUserWithEmailAndPassword:l,updateProfile:d,signOut:f}=await Promise.resolve().then(t.bind(t,24903)),b=s({apiKey:"AIzaSyBYQA66rKOPrb4kce-hYCTYAbGKanVGbZ8",authDomain:"mirrorsbeautylounge-7c5ff.firebaseapp.com",projectId:"mirrorsbeautylounge-7c5ff",storageBucket:"mirrorsbeautylounge-7c5ff.firebasestorage.app",messagingSenderId:"1029530532506",appId:"1:1029530532506:web:2fa18cc521b2524e5afd23",measurementId:"G-GMWQSDP9JW"},"secondary"),g=u(b),m=await l(g,e,r);a&&await d(m.user,{displayName:a}),await c(m.user.uid,e,n,a,o),await f(g);try{"delete"in b&&"function"==typeof b.delete&&await b.delete()}catch(e){console.log("Secondary app cleanup not needed or failed:",e)}return console.log("New user created successfully without affecting current session"),{success:!0,error:null,user:m.user}}catch(e){return console.error("Error creating new user:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}}}]);