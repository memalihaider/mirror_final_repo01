(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{931:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(95155),r=s(12115),l=s(40283),i=s(35695);function n(e){let{children:t}=e,{userRole:s,loading:n}=(0,l.A)(),c=(0,i.usePathname)(),d=(0,i.useRouter)(),[o,m]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(!n&&s){let e=c.split("/")[1]||"dashboard",t=s.accessPages||[];"admin"===s.role||t.includes(e)?m(!0):(m(!1),d.replace("/access-denied"))}},[n,s,c,d]),n||!s)?(0,a.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"}),(0,a.jsx)("span",{className:"ml-3 text-pink-600",children:"Checking access..."})]}):o?(0,a.jsx)(a.Fragment,{children:t}):null}},17951:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},19946:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(12115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:s,strokeWidth:c?24*Number(n)/Number(r):n,className:l("lucide",d),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{className:c,...d}=s;return(0,a.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return s.displayName=r(e),s}},28883:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},35695:(e,t,s)=>{"use strict";var a=s(18999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},40283:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,O:()=>d});var a=s(95155),r=s(12115),l=s(79323),i=s(56104);let n=(0,r.createContext)({user:null,userRole:null,loading:!0,isAdmin:!1,error:null,accessiblePages:[],canAccessPage:()=>!1}),c=()=>(0,r.useContext)(n),d=e=>{let{children:t}=e,[s,c]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null),[p,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e,t=!0;return(async()=>{try{u(!0),await (0,i.AU)(),e=(0,l.Bh)(async e=>{if(t){if(c(e),h(null),e)try{let s=await (0,l.uG)(e.uid);if(!s&&e.email){let t="ahmadxeikh786@gmail.com"===e.email?"admin":"user";await (0,l.yS)(e.uid,e.email,t,e.displayName||void 0,[]),s=await (0,l.uG)(e.uid)}(null==s?void 0:s.role)!=="admin"&&"ahmadxeikh786@gmail.com"===e.email&&(await (0,l.yS)(e.uid,e.email,"admin",e.displayName||void 0,[]),s=await (0,l.uG)(e.uid)),t&&(o(s),g((null==s?void 0:s.accessPages)||[]))}catch(e){console.error("Error getting user role:",e),t&&h("Failed to load user role")}else t&&(o(null),g([]));t&&u(!1)}})}catch(e){console.error("Firebase initialization error:",e),t&&(h("Failed to initialize authentication"),u(!1))}})(),()=>{t=!1,e&&e()}},[]);let f=(null==d?void 0:d.role)==="admin";return(0,a.jsx)(n.Provider,{value:{user:s,userRole:d,loading:m,isAdmin:f,error:x,accessiblePages:p,canAccessPage:e=>!!d&&("admin"===d.role||p.includes(e))},children:t})}},62437:(e,t,s)=>{Promise.resolve().then(s.bind(s,65435))},65435:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(95155),r=s(12115),l=s(40283);s(79323);var i=s(17951),n=s(28883);let c=(0,s(19946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var d=s(69074),o=s(931);function m(){var e;let{user:t,userRole:s}=(0,l.A)(),[m,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)((null==t?void 0:t.displayName)||""),[p,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(""),[v,N]=(0,r.useState)("");return(0,a.jsx)(o.A,{children:(0,a.jsx)("div",{className:"p-2 sm:p-3",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto text-center",children:[(0,a.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,a.jsx)("h1",{className:"text-base sm:text-lg font-medium text-pink-600 mb-1",children:"Profile Settings"}),(0,a.jsx)("p",{className:"text-xs text-pink-500",children:"Manage your account information"})]}),f&&(0,a.jsx)("div",{className:"mb-3 p-2 sm:p-3 bg-green-50 border border-green-200 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-green-600 text-xs sm:text-sm",children:f})}),v&&(0,a.jsx)("div",{className:"mb-3 p-2 sm:p-3 bg-red-50 border border-red-200 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-red-600 text-xs sm:text-sm",children:v})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl border border-pink-200/30 rounded-xl sm:rounded-2xl shadow-[0_8px_30px_rgb(233,30,99,0.15)] p-3 sm:p-4 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center mb-4 space-y-2",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center bg-gradient-to-br from-yellow-400 to-orange-500",children:(0,a.jsx)(i.A,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm sm:text-base font-bold text-gray-900",children:(null==t?void 0:t.displayName)||(null==t||null==(e=t.email)?void 0:e.split("@")[0])||"User"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null==t?void 0:t.email}),(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium mt-1 bg-yellow-100 text-yellow-700 border border-yellow-200",children:[(0,a.jsx)(i.A,{className:"w-3 h-3 mr-1"}),(null==s?void 0:s.role)||"User"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1 text-left",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Email"}),(0,a.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate",children:null==t?void 0:t.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[(0,a.jsx)(c,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Role"}),(0,a.jsxs)("p",{className:"text-xs font-medium text-gray-900",children:[(null==s?void 0:s.role)||"User"," "]})]})]}),(null==t?void 0:t.createdAt)&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Member Since"}),(0,a.jsx)("p",{className:"text-xs font-medium text-gray-900",children:t.createdAt instanceof Date?t.createdAt.toLocaleDateString():new Date(t.createdAt).toLocaleDateString()})]})]})]})]})})]})})})}},69074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}},e=>{e.O(0,[9135,7210,1748,9323,8441,5964,7358],()=>e(e.s=62437)),_N_E=e.O()}]);