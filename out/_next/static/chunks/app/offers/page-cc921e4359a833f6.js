(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5928],{931:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(95155),s=a(12115),l=a(40283),i=a(35695);function n(e){let{children:t}=e,{userRole:a,loading:n}=(0,l.A)(),o=(0,i.usePathname)(),d=(0,i.useRouter)(),[c,m]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(!n&&a){let e=o.split("/")[1]||"dashboard",t=a.accessPages||[];"admin"===a.role||t.includes(e)?m(!0):(m(!1),d.replace("/access-denied"))}},[n,a,o,d]),n||!a)?(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"}),(0,r.jsx)("span",{className:"ml-3 text-pink-600",children:"Checking access..."})]}):c?(0,r.jsx)(r.Fragment,{children:t}):null}},19946:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:m,...x}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:o?24*Number(n)/Number(s):n,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:o,...d}=a;return(0,r.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return a.displayName=s(e),a}},35695:(e,t,a)=>{"use strict";var r=a(18999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},40283:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,O:()=>d});var r=a(95155),s=a(12115),l=a(79323),i=a(56104);let n=(0,s.createContext)({user:null,userRole:null,loading:!0,isAdmin:!1,error:null,accessiblePages:[],canAccessPage:()=>!1}),o=()=>(0,s.useContext)(n),d=e=>{let{children:t}=e,[a,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),[p,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e,t=!0;return(async()=>{try{x(!0),await (0,i.AU)(),e=(0,l.Bh)(async e=>{if(t){if(o(e),h(null),e)try{let a=await (0,l.uG)(e.uid);if(!a&&e.email){let t="ahmadxeikh786@gmail.com"===e.email?"admin":"user";await (0,l.yS)(e.uid,e.email,t,e.displayName||void 0,[]),a=await (0,l.uG)(e.uid)}(null==a?void 0:a.role)!=="admin"&&"ahmadxeikh786@gmail.com"===e.email&&(await (0,l.yS)(e.uid,e.email,"admin",e.displayName||void 0,[]),a=await (0,l.uG)(e.uid)),t&&(c(a),g((null==a?void 0:a.accessPages)||[]))}catch(e){console.error("Error getting user role:",e),t&&h("Failed to load user role")}else t&&(c(null),g([]));t&&x(!1)}})}catch(e){console.error("Firebase initialization error:",e),t&&(h("Failed to initialize authentication"),x(!1))}})(),()=>{t=!1,e&&e()}},[]);let v=(null==d?void 0:d.role)==="admin";return(0,r.jsx)(n.Provider,{value:{user:a,userRole:d,loading:m,isAdmin:v,error:u,accessiblePages:p,canAccessPage:e=>!!d&&("admin"===d.role||p.includes(e))},children:t})}},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},70978:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(95155),s=a(12115),l=a(66766),i=a(43116),n=a(931),o=a(89917),d=a(62525);function c(){var e,t;let[a,c]=(0,s.useState)([]),[m,x]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[p,g]=(0,s.useState)([]),[v,f]=(0,s.useState)(!1),[j,b]=(0,s.useState)("offer"),[N,w]=(0,s.useState)(null),[k,y]=(0,s.useState)({}),[C,A]=(0,s.useState)("offers"),[L,M]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=(0,i.CX)(c),t=(0,i.VW)(x),a=(0,i.bm)(h),r=(0,i.pv)(g);return()=>{e(),t(),a(),r()}},[]);let D=L?a.filter(e=>e.branches.some(e=>e.id===L)):a,z=L?m.filter(e=>e.branches.some(e=>e.id===L)):m,S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;b(e),w(t),y(t||{name:"",description:"",discount:0,usageLimit:0,startDate:"",endDate:"",isActive:!0,image:"",referralCode:"",branches:[],services:[]}),f(!0)},B=()=>{f(!1),w(null),y({})},W=async e=>{e.preventDefault();try{let e=Number(k.discount)||0,t=Number(k.usageLimit)||0,a=Array.isArray(k.branches)?k.branches.map(e=>({id:e.id,name:e.name})):[],r=Array.isArray(k.services)?k.services.map(e=>({id:e.id,name:e.name})):[];if("offer"===j){let s={name:k.name||"",description:k.description||"",discount:e,usageLimit:t,startDate:k.startDate||"",endDate:k.endDate||"",isActive:!!k.isActive,branches:a,services:r};k.image&&(s.image=k.image),(null==N?void 0:N.id)?await (0,i.Gz)(N.id,s):await (0,i.kQ)(s)}else{let s={name:k.name||"",description:k.description||"",discount:e,usageLimit:t,startDate:k.startDate||"",endDate:k.endDate||"",isActive:!!k.isActive,referralCode:k.referralCode||"",branches:a,services:r};(null==N?void 0:N.id)?await (0,i.fl)(N.id,s):await (0,i.n$)(s)}B()}catch(e){console.error("Error saving offer/referral:",e),alert("Failed to save offer/referral. Check console for details.")}},E=async(e,t)=>{confirm("Are you sure you want to delete this item?")&&("offer"===e?await (0,i._i)(t):await (0,i.Zn)(t))};return(0,r.jsxs)(n.A,{children:[(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50 animate-gradient-x",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-r from-pink-600 via-pink-500 to-purple-600 text-white animate-gradient-x",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/10 animate-pulse-slow"}),(0,r.jsx)("div",{className:"relative p-8 animate-fade-in",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2 animate-slide-up",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-white to-pink-100 bg-clip-text text-transparent animate-text-shimmer",children:"Offers & Referrals"}),(0,r.jsx)("p",{className:"text-pink-100 text-lg animate-fade-in-delay",children:"Manage your promotional campaigns and referral programs"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 animate-slide-down",children:[(0,r.jsxs)("div",{className:"relative animate-bounce-subtle",children:[(0,r.jsxs)("select",{value:L,onChange:e=>M(e.target.value),className:"appearance-none bg-white/20 backdrop-blur-sm border border-white/30 rounded-2xl px-4 py-3 pr-10 text-white placeholder-pink-100 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-white/50 transition-all duration-200 hover:bg-white/30 hover:scale-105",children:[(0,r.jsx)("option",{value:"",className:"text-gray-800",children:"All Branches"}),u.map(e=>(0,r.jsx)("option",{value:e.id,className:"text-gray-800",children:e.name},e.id))]}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white/70 animate-bounce-gentle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,r.jsx)("button",{onClick:()=>S("offer"),className:"group relative px-6 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-2xl text-white font-medium hover:bg-white/30 hover:scale-105 active:scale-95 transition-all duration-200 shadow-lg hover:shadow-xl animate-float",children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Offer"]})}),(0,r.jsx)("button",{onClick:()=>S("referral"),className:"group relative px-6 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-2xl text-white font-medium hover:bg-white/30 hover:scale-105 active:scale-95 transition-all duration-200 shadow-lg hover:shadow-xl animate-float-delay",children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Referral"]})})]})]})})})]}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-8 space-y-8 animate-fade-in-up",children:[(0,r.jsx)("div",{className:"flex justify-center animate-slide-up-delay",children:(0,r.jsxs)("div",{className:"inline-flex gap-1 bg-white/80 backdrop-blur-sm p-1.5 rounded-3xl border border-pink-200/50 shadow-lg animate-glow",children:[(0,r.jsxs)("button",{className:"relative px-8 py-3 rounded-2xl text-sm font-semibold transition-all duration-300 ".concat("offers"===C?"bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-lg transform scale-105 animate-pulse-glow":"text-pink-600 hover:bg-pink-50 hover:text-pink-700 hover:scale-105"),onClick:()=>A("offers"),children:[(0,r.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 animate-spin-slow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Offers"]}),"offers"===C&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500 to-purple-500 rounded-2xl opacity-20 animate-pulse"})]}),(0,r.jsxs)("button",{className:"relative px-8 py-3 rounded-2xl text-sm font-semibold transition-all duration-300 ".concat("referrals"===C?"bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-lg transform scale-105":"text-pink-600 hover:bg-pink-50 hover:text-pink-700"),onClick:()=>A("referrals"),children:[(0,r.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Referrals"]}),"referrals"===C&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500 to-purple-500 rounded-2xl opacity-20 animate-pulse"})]})]})}),"offers"===C?(0,r.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 animate-fade-in-content",children:[D.map((e,t)=>{var a,s;return(0,r.jsxs)("div",{className:"group relative bg-white/80 backdrop-blur-sm rounded-3xl border border-pink-200/50 shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden hover:scale-105 animate-bounce-in",style:{animationDelay:"".concat(.1*t,"s")},children:[(0,r.jsxs)("div",{className:"relative h-48 w-full overflow-hidden rounded-t-3xl",children:[e.image?(0,r.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover group-hover:scale-110 transition-transform duration-500"}):(0,r.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-16 h-16 text-white/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),(0,r.jsx)("div",{className:"absolute top-4 right-4",children:(0,r.jsx)("span",{className:"px-3 py-1.5 rounded-full text-xs font-semibold backdrop-blur-sm ".concat(e.isActive?"bg-green-500/90 text-white shadow-lg":"bg-gray-500/90 text-white shadow-lg"),children:e.isActive?"Active":"Inactive"})}),(0,r.jsx)("div",{className:"absolute top-4 left-4",children:(0,r.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1.5 rounded-full text-sm font-bold shadow-lg",children:[e.discount,"% OFF"]})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-bold text-xl text-gray-800 line-clamp-2 group-hover:text-pink-600 transition-colors",children:e.name}),(0,r.jsx)("p",{className:"text-gray-600 text-sm line-clamp-3 leading-relaxed",children:e.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-pink-50 rounded-2xl p-3 text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-pink-600",children:[e.discount,"%"]}),(0,r.jsx)("div",{className:"text-xs text-pink-500 font-medium",children:"Discount"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-2xl p-3 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.usageLimit}),(0,r.jsx)("div",{className:"text-xs text-purple-500 font-medium",children:"Usage Limit"})]})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"font-medium",children:"Start:"})," ",e.startDate]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"font-medium",children:"End:"})," ",e.endDate]})]}),(null==(a=e.branches)?void 0:a.length)>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Branches"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.branches.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded-full bg-gradient-to-r from-pink-100 to-purple-100 text-pink-700 text-xs font-medium border border-pink-200",children:e.name},e.id))})]}),(null==(s=e.services)?void 0:s.length)>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Services"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.services.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded-full bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 text-xs font-medium border border-blue-200",children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"pt-4 flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>S("offer",e),className:"group/btn p-3 rounded-2xl bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-110",title:"Edit",children:(0,r.jsx)(o.A,{size:16,className:"text-white group-hover/btn:scale-110 transition-transform"})}),(0,r.jsx)("button",{onClick:()=>E("offer",e.id),className:"group/btn p-3 rounded-2xl bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-110",title:"Delete",children:(0,r.jsx)(d.A,{size:16,className:"text-white group-hover/btn:scale-110 transition-transform"})})]})]})]},e.id)}),0===D.length&&(0,r.jsxs)("div",{className:"col-span-full text-center py-16",children:[(0,r.jsx)("div",{className:"text-gray-400 text-lg",children:"No offers found"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Create your first offer to get started"})]})]}):(0,r.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 animate-fade-in-content",children:[z.map((e,t)=>{var a,s;return(0,r.jsxs)("div",{className:"group relative bg-white/80 backdrop-blur-sm rounded-3xl border border-pink-200/50 shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden hover:scale-105 animate-bounce-in",style:{animationDelay:"".concat(.1*t,"s")},children:[(0,r.jsxs)("div",{className:"relative h-32 w-full bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-white/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,r.jsx)("div",{className:"absolute top-4 right-4",children:(0,r.jsx)("span",{className:"px-3 py-1.5 rounded-full text-xs font-semibold backdrop-blur-sm ".concat(e.isActive?"bg-green-500/90 text-white shadow-lg":"bg-gray-500/90 text-white shadow-lg"),children:e.isActive?"Active":"Inactive"})}),(0,r.jsx)("div",{className:"absolute top-4 left-4",children:(0,r.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1.5 rounded-full text-sm font-bold shadow-lg",children:[e.discount,"% OFF"]})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-bold text-xl text-gray-800 line-clamp-2 group-hover:text-purple-600 transition-colors",children:e.name}),(0,r.jsx)("p",{className:"text-gray-600 text-sm line-clamp-3 leading-relaxed",children:e.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-purple-50 rounded-2xl p-3 text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[e.discount,"%"]}),(0,r.jsx)("div",{className:"text-xs text-purple-500 font-medium",children:"Discount"})]}),(0,r.jsxs)("div",{className:"bg-pink-50 rounded-2xl p-3 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-pink-600",children:e.usageLimit}),(0,r.jsx)("div",{className:"text-xs text-pink-500 font-medium",children:"Usage Limit"})]})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"font-medium",children:"Start:"})," ",e.startDate]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"font-medium",children:"End:"})," ",e.endDate]}),e.referralCode&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),(0,r.jsx)("span",{className:"font-medium",children:"Code:"}),(0,r.jsx)("span",{className:"bg-gradient-to-r from-blue-100 to-purple-100 px-2 py-1 rounded-lg font-mono text-blue-700 border border-blue-200",children:e.referralCode})]})]}),(null==(a=e.branches)?void 0:a.length)>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Branches"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.branches.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded-full bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 text-xs font-medium border border-purple-200",children:e.name},e.id))})]}),(null==(s=e.services)?void 0:s.length)>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Services"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.services.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded-full bg-gradient-to-r from-indigo-100 to-blue-100 text-indigo-700 text-xs font-medium border border-indigo-200",children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"pt-4 flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>S("referral",e),className:"group/btn p-3 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-110",title:"Edit",children:(0,r.jsx)(o.A,{size:16,className:"text-white group-hover/btn:scale-110 transition-transform"})}),(0,r.jsx)("button",{onClick:()=>E("referral",e.id),className:"group/btn p-3 rounded-2xl bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-110",title:"Delete",children:(0,r.jsx)(d.A,{size:16,className:"text-white group-hover/btn:scale-110 transition-transform"})})]})]})]},e.id)}),0===z.length&&(0,r.jsxs)("div",{className:"col-span-full text-center py-16",children:[(0,r.jsx)("div",{className:"text-gray-400 text-lg",children:"No referrals found"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Create your first referral program to get started"})]})]})]})]}),v&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 px-3",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[80vh] overflow-y-auto p-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-pink-700 mb-4",children:[N?"Edit":"Add"," ","offer"===j?"Offer":"Referral"]}),(0,r.jsxs)("form",{className:"space-y-4",onSubmit:W,children:[(0,r.jsx)("input",{type:"text",placeholder:"Name",value:k.name||"",onChange:e=>y({...k,name:e.target.value}),className:"w-full border rounded-2xl px-3 py-2",required:!0}),(0,r.jsx)("textarea",{placeholder:"Description",value:k.description||"",onChange:e=>y({...k,description:e.target.value}),className:"w-full border rounded-2xl px-3 py-2"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"number",placeholder:"Discount %",value:k.discount||"",onChange:e=>y({...k,discount:e.target.value}),className:"w-1/2 border rounded-2xl px-3 py-2"}),(0,r.jsx)("input",{type:"number",placeholder:"Usage Limit",value:k.usageLimit||"",onChange:e=>y({...k,usageLimit:e.target.value}),className:"w-1/2 border rounded-2xl px-3 py-2"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"date",placeholder:"Start Date",value:k.startDate||"",onChange:e=>y({...k,startDate:e.target.value}),className:"w-1/2 border rounded-2xl px-3 py-2"}),(0,r.jsx)("input",{type:"date",placeholder:"End Date",value:k.endDate||"",onChange:e=>y({...k,endDate:e.target.value}),className:"w-1/2 border rounded-2xl px-3 py-2"})]}),"offer"===j&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-gray-500",children:"Add Image"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){let e=new FileReader;e.onload=()=>{y({...k,image:e.result})},e.readAsDataURL(a)}},className:"w-full border rounded-2xl px-3 py-2 mt-1"}),k.image&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("img",{src:k.image,alt:"Preview",className:"w-full h-auto rounded-lg"})})]}),"referral"===j&&(0,r.jsx)("input",{type:"text",placeholder:"Referral Code",value:k.referralCode||"",onChange:e=>y({...k,referralCode:e.target.value}),className:"w-full border rounded-2xl px-3 py-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-gray-500",children:"Branches"}),(0,r.jsx)("select",{multiple:!0,value:(null==(e=k.branches)?void 0:e.map(e=>e.id))||[],onChange:e=>{let t=Array.from(e.target.selectedOptions).map(e=>e.value),a=u.filter(e=>t.includes(e.id));y({...k,branches:a})},className:"w-full border rounded-2xl px-3 py-2 mt-1",children:u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-gray-500",children:"Services"}),(0,r.jsx)("select",{multiple:!0,value:(null==(t=k.services)?void 0:t.map(e=>e.id))||[],onChange:e=>{let t=Array.from(e.target.selectedOptions).map(e=>e.value),a=p.filter(e=>t.includes(e.id));y({...k,services:a})},className:"w-full border rounded-2xl px-3 py-2 mt-1",children:p.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:B,className:"group px-6 py-3 rounded-2xl border-2 border-gray-300 text-gray-700 font-medium hover:border-gray-400 hover:bg-gray-50 hover:scale-105 active:scale-95 transition-all duration-200 shadow-md hover:shadow-lg",children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})}),(0,r.jsx)("button",{type:"submit",className:"group px-6 py-3 rounded-2xl bg-gradient-to-r from-pink-500 to-purple-500 text-white font-medium hover:from-pink-600 hover:to-purple-600 hover:scale-105 active:scale-95 transition-all duration-200 shadow-lg hover:shadow-xl",children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),N?"Update":"Add"]})})]})]})]})})]})}},74199:(e,t,a)=>{Promise.resolve().then(a.bind(a,70978))},89917:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])}},e=>{e.O(0,[9135,7210,1748,6766,9323,3116,8441,5964,7358],()=>e(e.s=74199)),_N_E=e.O()}]);