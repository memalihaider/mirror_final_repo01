(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8080],{931:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(95155),i=a(12115),l=a(40283),r=a(35695);function d(e){let{children:t}=e,{userRole:a,loading:d}=(0,l.A)(),n=(0,r.usePathname)(),c=(0,r.useRouter)(),[o,m]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(!d&&a){let e=n.split("/")[1]||"dashboard",t=a.accessPages||[];"admin"===a.role||t.includes(e)?m(!0):(m(!1),c.replace("/access-denied"))}},[d,a,n,c]),d||!a)?(0,s.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"}),(0,s.jsx)("span",{className:"ml-3 text-pink-600",children:"Checking access..."})]}):o?(0,s.jsx)(s.Fragment,{children:t}):null}},11131:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95155),i=a(12115),l=a(35317),r=a(56104),d=a(38274);let n=(0,a(19946).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);var c=a(91788),o=a(17580),m=a(69074),x=a(51154),h=a(15448),p=a(69037),u=a(28883),y=a(71007),g=a(931);function b(){let[e,t]=(0,i.useState)([]),[a,b]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=(0,l.rJ)(r.db,"feedback"),a=(0,l.P)(e,(0,l.My)("createdAt","desc")),s=(0,l.aQ)(a,e=>{t(e.docs.map(e=>({id:e.id,...e.data()}))),b(!1)});return()=>s()},[]);let j=e.length,N=new Set(e.map(e=>e.userId)).size,f=new Set(e.map(e=>e.branch)).size;return(0,s.jsx)(g.A,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50",children:(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsxs)(d.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-r from-pink-500 to-purple-600 rounded-xl shadow-lg",children:(0,s.jsx)(n,{className:"w-8 h-8 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Feedback Reports"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"View and analyze customer feedback data"})]})]}),(0,s.jsxs)("button",{onClick:()=>{if(0===e.length)return void alert("No data to export");let t=new Blob([["Booking Date,Booking ID,Booking Time,Branch,Created At,Message,Service Name,User Email,User ID,User Name",...e.map(e=>{var t,a;return[(null==(t=e.bookingDate)?void 0:t.toDate)?e.bookingDate.toDate().toLocaleString():"-",e.bookingId||"-",e.bookingTime||"-",e.branch||"-",(null==(a=e.createdAt)?void 0:a.toDate)?e.createdAt.toDate().toLocaleString():"-",e.message||"-",e.serviceName||"-",e.userEmail||"-",e.userId||"-",e.userName||"-"]}).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","feedback-reports-".concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)},disabled:a||0===e.length,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-lg hover:from-pink-600 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(c.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Export CSV"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Total Feedbacks"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:j})]}),(0,s.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg",children:(0,s.jsx)(n,{className:"w-6 h-6 text-white"})})]})}),(0,s.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Unique Users"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:N})]}),(0,s.jsx)("div",{className:"p-3 bg-gradient-to-r from-green-500 to-green-600 rounded-lg",children:(0,s.jsx)(o.A,{className:"w-6 h-6 text-white"})})]})}),(0,s.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Branches"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:f})]}),(0,s.jsx)("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg",children:(0,s.jsx)(m.A,{className:"w-6 h-6 text-white"})})]})})]})]}),(0,s.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Feedback Records"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"List of all feedback collected from users"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:a?(0,s.jsxs)("div",{className:"p-16 flex flex-col items-center justify-center",children:[(0,s.jsx)(x.A,{className:"w-8 h-8 text-pink-600 animate-spin mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Loading feedback reports..."})]}):0===e.length?(0,s.jsxs)("div",{className:"p-16 text-center",children:[(0,s.jsx)(n,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No feedback found"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Feedback will appear here once users submit them."})]}):(0,s.jsxs)(d.P.table,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-gradient-to-r from-pink-600 to-purple-600 text-white",children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 inline mr-2"})," Booking Date"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 inline mr-2"})," Booking ID"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 inline mr-2"})," Booking Time"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 inline mr-2"})," Branch"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 inline mr-2"})," Created At"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(n,{className:"w-4 h-4 inline mr-2"})," Message"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(p.A,{className:"w-4 h-4 inline mr-2"})," Service Name"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 inline mr-2"})," User Email"]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:[(0,s.jsx)(y.A,{className:"w-4 h-4 inline mr-2"})," User Name"]})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-100",children:e.map((e,t)=>{var a,i;return(0,s.jsxs)(d.P.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"hover:bg-gradient-to-r hover:from-pink-50 hover:to-purple-50 transition-all duration-200",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(null==(a=e.bookingDate)?void 0:a.toDate)?e.bookingDate.toDate().toLocaleDateString():"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.bookingId||"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.bookingTime||"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.branch||"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(null==(i=e.createdAt)?void 0:i.toDate)?e.createdAt.toDate().toLocaleString():"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.message||"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.serviceName||"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.userEmail||"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.userName||"-"})]},e.id)})})]})})]})]})})})}},15448:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},17580:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},28883:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},40283:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,O:()=>c});var s=a(95155),i=a(12115),l=a(79323),r=a(56104);let d=(0,i.createContext)({user:null,userRole:null,loading:!0,isAdmin:!1,error:null,accessiblePages:[],canAccessPage:()=>!1}),n=()=>(0,i.useContext)(d),c=e=>{let{children:t}=e,[a,n]=(0,i.useState)(null),[c,o]=(0,i.useState)(null),[m,x]=(0,i.useState)(!0),[h,p]=(0,i.useState)(null),[u,y]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e,t=!0;return(async()=>{try{x(!0),await (0,r.AU)(),e=(0,l.Bh)(async e=>{if(t){if(n(e),p(null),e)try{let a=await (0,l.uG)(e.uid);if(!a&&e.email){let t="ahmadxeikh786@gmail.com"===e.email?"admin":"user";await (0,l.yS)(e.uid,e.email,t,e.displayName||void 0,[]),a=await (0,l.uG)(e.uid)}(null==a?void 0:a.role)!=="admin"&&"ahmadxeikh786@gmail.com"===e.email&&(await (0,l.yS)(e.uid,e.email,"admin",e.displayName||void 0,[]),a=await (0,l.uG)(e.uid)),t&&(o(a),y((null==a?void 0:a.accessPages)||[]))}catch(e){console.error("Error getting user role:",e),t&&p("Failed to load user role")}else t&&(o(null),y([]));t&&x(!1)}})}catch(e){console.error("Firebase initialization error:",e),t&&(p("Failed to initialize authentication"),x(!1))}})(),()=>{t=!1,e&&e()}},[]);let g=(null==c?void 0:c.role)==="admin";return(0,s.jsx)(d.Provider,{value:{user:a,userRole:c,loading:m,isAdmin:g,error:h,accessiblePages:u,canAccessPage:e=>!!c&&("admin"===c.role||u.includes(e))},children:t})}},51154:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},69037:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},69074:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71007:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},91788:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},94515:(e,t,a)=>{Promise.resolve().then(a.bind(a,11131))}},e=>{e.O(0,[9135,7210,1748,6061,9323,8441,5964,7358],()=>e(e.s=94515)),_N_E=e.O()}]);