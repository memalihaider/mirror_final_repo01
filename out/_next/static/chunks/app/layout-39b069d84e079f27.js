(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{8022:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(95155);function a(){let e=new Date().getFullYear();return(0,s.jsx)("footer",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-t border-gray-200 mt-12",children:(0,s.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-pink-500 to-rose-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-xs font-bold",children:"M"})}),(0,s.jsxs)("span",{className:"text-gray-700 font-semibold text-sm",children:["Mirror Beauty Lounge \xa9 ",e]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:"Developed by"}),(0,s.jsxs)("a",{href:"https://largifysolutions.com/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-gray-900 font-semibold text-sm transition-colors duration-200 flex items-center space-x-1",children:[(0,s.jsx)("span",{children:"Largify Solutions"}),(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})})})}},25154:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,91482,23)),Promise.resolve().then(r.t.bind(r,30347,23)),Promise.resolve().then(r.bind(r,8022)),Promise.resolve().then(r.bind(r,60888))},30347:()=>{},40283:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,O:()=>d});var s=r(95155),a=r(12115),n=r(79323),i=r(56104);let o=(0,a.createContext)({user:null,userRole:null,loading:!0,isAdmin:!1,error:null,accessiblePages:[],canAccessPage:()=>!1}),l=()=>(0,a.useContext)(o),d=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),[p,g]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e,t=!0;return(async()=>{try{m(!0),await (0,i.AU)(),e=(0,n.Bh)(async e=>{if(t){if(l(e),h(null),e)try{let r=await (0,n.uG)(e.uid);if(!r&&e.email){let t="ahmadxeikh786@gmail.com"===e.email?"admin":"user";await (0,n.yS)(e.uid,e.email,t,e.displayName||void 0,[]),r=await (0,n.uG)(e.uid)}(null==r?void 0:r.role)!=="admin"&&"ahmadxeikh786@gmail.com"===e.email&&(await (0,n.yS)(e.uid,e.email,"admin",e.displayName||void 0,[]),r=await (0,n.uG)(e.uid)),t&&(c(r),g((null==r?void 0:r.accessPages)||[]))}catch(e){console.error("Error getting user role:",e),t&&h("Failed to load user role")}else t&&(c(null),g([]));t&&m(!1)}})}catch(e){console.error("Firebase initialization error:",e),t&&(h("Failed to initialize authentication"),m(!1))}})(),()=>{t=!1,e&&e()}},[]);let f=(null==d?void 0:d.role)==="admin";return(0,s.jsx)(o.Provider,{value:{user:r,userRole:d,loading:u,isAdmin:f,error:x,accessiblePages:p,canAccessPage:e=>!!d&&("admin"===d.role||p.includes(e))},children:t})}},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(52596),a=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},60888:(e,t,r)=>{"use strict";r.d(t,{default:()=>eo});var s=r(95155),a=r(12115),n=r(35695),i=r(73783),o=r(46308),l=r(14395),d=r(69074),c=r(27809),u=r(33109),m=r(71366),x=r(23227),h=r(81586),p=r(57434),g=r(55670),f=r(25273),b=r(72713),y=r(79772),v=r(17580),k=r(381),w=r(54416),j=r(74783),N=r(13052),A=r(59434),E=r(38274),S=r(60760),C=r(37040);function P(e){let{delayDuration:t=0,...r}=e;return(0,s.jsx)(C.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function I(e){let{...t}=e;return(0,s.jsx)(P,{children:(0,s.jsx)(C.bL,{"data-slot":"tooltip",...t})})}function M(e){let{...t}=e;return(0,s.jsx)(C.l9,{"data-slot":"tooltip-trigger",...t})}function T(e){let{className:t,sideOffset:r=0,children:a,...n}=e;return(0,s.jsx)(C.ZL,{children:(0,s.jsxs)(C.UC,{"data-slot":"tooltip-content",sideOffset:r,className:(0,A.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[a,(0,s.jsx)(C.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}let L=[{icon:i.A,label:"Dashboard",href:"/",roles:["admin","user"]},{icon:o.A,label:"Invoice Management",href:"/invoice-generator",roles:["admin","user"],subItems:[{label:"Create Invoice",href:"/invoice-generator"}]},{icon:l.A,label:"Products",href:"/products",roles:["admin","user"],subItems:[{label:"Categories",href:"/catagories"},{label:"Services",href:"/services"},{label:"Offers & Promotions",href:"/offers"}]},{icon:d.A,label:"Appointments",href:"/bookings",roles:["admin"],subItems:[]},{icon:c.A,label:"E-commerce",href:"/ecommerce",roles:["admin","user"],subItems:[]},{icon:u.A,label:"Analytics",href:"/sales",roles:["admin","user"],subItems:[]},{icon:m.A,label:"Support",href:"/chat",roles:["admin"],subItems:[]},{icon:x.A,label:"Branches",href:"/branches",roles:["admin","user"],subItems:[]},{icon:h.A,label:"Membership",href:"/membership",roles:["admin","user"],subItems:[]},{icon:p.A,label:"Reports",href:"/membershipReport",roles:["admin","user"],subItems:[]},{icon:p.A,label:"Feedback",href:"/feedback",roles:["admin","user"],subItems:[]},{icon:g.A,label:"Staff",href:"/staff",roles:["admin","user"],subItems:[]},{icon:g.A,label:"Booking Approval",href:"/bookingstatus",roles:["admin","user"],subItems:[]},{icon:f.A,label:"Tasks",href:"/staffDailyTasks",roles:["admin","user"],subItems:[]},{icon:b.A,label:"Business",href:"/reports",roles:["admin","user"],subItems:[]},{icon:y.A,label:"Customers",href:"/customers",roles:["admin","user"],subItems:[]},{icon:v.A,label:"Users",href:"/users",roles:["admin"],subItems:[]},{icon:k.A,label:"Settings",href:"/profile",roles:["admin","user"],subItems:[]}];function D(e){let{collapsed:t,onToggle:r}=e,i=(0,n.usePathname)(),o=(0,n.useRouter)(),[l,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e,t=()=>{clearTimeout(e),e=setTimeout(()=>{x(window.innerWidth<768)},100)};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),clearTimeout(e)}},[]),(0,a.useEffect)(()=>{u("dark"===localStorage.getItem("theme"));let e=new MutationObserver(()=>{u(document.documentElement.classList.contains("dark"))});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[]),(0,a.useEffect)(()=>{let e=e=>{m&&h&&g.current&&!g.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[m,h]),(0,a.useEffect)(()=>{m&&p(!1)},[i,m]);let f=(0,a.useCallback)(e=>"/dashboard"===e?"/"===i||"/dashboard"===i:i.startsWith(e),[i]),b=(0,a.useCallback)(e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),y=(0,a.useCallback)(e=>{o.push(e),m&&p(!1)},[o,m]),v=(0,a.useCallback)(()=>{r(),m&&p(!h)},[r,m,h]);return"/signin"===i?null:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:v,className:(0,A.cn)("fixed top-4 left-4 z-50 p-2 rounded-xl","bg-gradient-to-br from-pink-500 to-pink-600","text-white shadow-lg shadow-pink-500/25","transition-all duration-200 hover:scale-105 active:scale-95","md:hidden"),"aria-label":"Toggle menu",children:(0,s.jsx)(E.P.div,{animate:{rotate:90*!!h},transition:{duration:.2,ease:"easeInOut"},children:h?(0,s.jsx)(w.A,{className:"w-5 h-5"}):(0,s.jsx)(j.A,{className:"w-5 h-5"})})}),(0,s.jsx)(S.N,{children:h&&(0,s.jsx)(E.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 md:hidden",onClick:()=>p(!1)})}),(0,s.jsx)(S.N,{children:h&&(0,s.jsx)(E.P.div,{ref:g,initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",damping:25,stiffness:200},className:(0,A.cn)("fixed left-0 top-0 h-full z-50 flex flex-col w-64","bg-white/95 backdrop-blur-lg dark:bg-slate-900/95","border-r border-gray-200/50 dark:border-slate-700/50","shadow-xl shadow-gray-200/20 dark:shadow-slate-900/50","md:hidden"),children:(0,s.jsx)(R,{pathname:i,darkMode:c,openMenus:l,toggleSubmenu:b,handleNavigation:y,isMenuItemActive:f,onClose:()=>p(!1)})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:r,className:(0,A.cn)("fixed top-4 z-40 p-2 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95","bg-gradient-to-br from-pink-500 to-pink-600 text-white shadow-lg","border border-pink-400/20 backdrop-blur-sm",t?"left-4":"left-64","hidden md:flex items-center justify-center"),"aria-label":"Toggle sidebar",children:(0,s.jsx)(E.P.div,{animate:{rotate:180*!t},transition:{duration:.2,ease:"easeInOut"},children:(0,s.jsx)(N.A,{className:"w-4 h-4"})})}),(0,s.jsx)(E.P.div,{ref:g,initial:!1,animate:{width:t?"72px":"240px"},transition:{duration:.2,ease:"easeInOut"},className:(0,A.cn)("fixed left-0 top-0 h-full z-30 flex flex-col","bg-white/95 backdrop-blur-lg dark:bg-slate-900/95","border-r border-gray-200/50 dark:border-slate-700/50","shadow-xl shadow-gray-200/20 dark:shadow-slate-900/50","hidden md:flex"),children:(0,s.jsx)(z,{collapsed:t,pathname:i,darkMode:c,openMenus:l,toggleSubmenu:b,handleNavigation:y,isMenuItemActive:f})})]})}let R=a.memo(e=>{let{pathname:t,darkMode:r,openMenus:a,toggleSubmenu:n,handleNavigation:i,isMenuItemActive:o,onClose:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200/50 dark:border-slate-700/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-pink-500 to-pink-600 rounded-lg flex items-center justify-center shadow-md",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"M"})}),(0,s.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Mirrors Beauty Lounge"})]}),(0,s.jsx)("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",children:(0,s.jsx)(w.A,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-1",children:L.map(e=>{let{icon:r,label:l,href:d,subItems:c=[]}=e,u=o(d),m=c.length>0,x=a.includes(d);return(0,s.jsxs)("div",{children:[(0,s.jsxs)(E.P.div,{whileTap:{scale:.97},transition:{duration:.1},onClick:()=>{m?n(d):i(d)},className:(0,A.cn)("flex items-center gap-3 px-3 py-2.5 rounded-xl cursor-pointer transition-all duration-150 group",u?"bg-pink-500 text-white shadow-md shadow-pink-500/25":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-800"),children:[(0,s.jsx)(r,{className:(0,A.cn)("w-4 h-4 flex-shrink-0",u&&"text-white")}),(0,s.jsx)("span",{className:"font-medium text-sm flex-1",children:l}),m&&(0,s.jsx)(E.P.div,{animate:{rotate:90*!!x},transition:{duration:.15},children:(0,s.jsx)(N.A,{className:"w-4 h-4"})})]}),(0,s.jsx)(S.N,{children:m&&x&&(0,s.jsx)(E.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"overflow-hidden",children:(0,s.jsx)("div",{className:"ml-6 mt-1 space-y-1 border-l border-gray-200 dark:border-slate-700 pl-3",children:c.map((e,r)=>(0,s.jsxs)(E.P.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{duration:.1,delay:.05*r},onClick:()=>i(e.href),className:(0,A.cn)("px-3 py-2 text-sm rounded-lg cursor-pointer transition-all duration-150 flex items-center gap-2",t===e.href?"bg-pink-500/10 text-pink-600 dark:text-pink-400 border border-pink-500/20":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-800/50"),children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]},r))})})})]},d)})})]})}),z=a.memo(e=>{let{collapsed:t,pathname:r,darkMode:a,openMenus:n,toggleSubmenu:i,handleNavigation:o,isMenuItemActive:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex items-center justify-center h-16 px-3 border-b border-gray-200/50 dark:border-slate-700/50",children:(0,s.jsxs)(E.P.div,{animate:{opacity:+!t,scale:t?.8:1},transition:{duration:.15},className:(0,A.cn)("flex items-center gap-2",t&&"pointer-events-none"),children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-pink-500 to-pink-600 rounded-lg flex items-center justify-center shadow-md",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"M"})}),!t&&(0,s.jsx)("h1",{className:"text-base font-semibold text-gray-900 dark:text-white whitespace-nowrap",children:"Mirrors Beauty"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-1",children:L.map(e=>{let{icon:a,label:d,href:c,subItems:u=[]}=e,m=l(c),x=u.length>0,h=n.includes(c);return(0,s.jsxs)("div",{children:[(0,s.jsxs)(I,{children:[(0,s.jsx)(M,{asChild:!0,children:(0,s.jsxs)(E.P.div,{whileHover:{x:2*!t},whileTap:{scale:.98},transition:{duration:.1},onClick:()=>{x?i(c):o(c)},className:(0,A.cn)("flex items-center gap-3 px-2 py-2.5 rounded-xl cursor-pointer transition-all duration-150 group",m?"bg-pink-500 text-white shadow-md shadow-pink-500/25":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-800"),children:[(0,s.jsx)(a,{className:(0,A.cn)("w-4 h-4 flex-shrink-0",m&&"text-white")}),(0,s.jsx)(E.P.span,{animate:{opacity:+!t},transition:{duration:.15},className:(0,A.cn)("font-medium text-sm flex-1 whitespace-nowrap",t&&"pointer-events-none"),children:d}),x&&!t&&(0,s.jsx)(E.P.div,{animate:{rotate:90*!!h},transition:{duration:.15},children:(0,s.jsx)(N.A,{className:"w-3.5 h-3.5"})})]})}),(0,s.jsx)(T,{side:"right",className:(0,A.cn)("bg-gray-900 text-white border-0 px-2 py-1 text-xs",t?"":"hidden"),children:(0,s.jsx)("p",{children:d})})]}),(0,s.jsx)(S.N,{children:x&&h&&!t&&(0,s.jsx)(E.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"overflow-hidden",children:(0,s.jsx)("div",{className:"ml-6 mt-1 space-y-1 border-l border-gray-200 dark:border-slate-700 pl-3",children:u.map((e,t)=>(0,s.jsxs)(E.P.div,{initial:{opacity:0,x:-4},animate:{opacity:1,x:0},transition:{duration:.1,delay:.03*t},onClick:()=>o(e.href),className:(0,A.cn)("px-2 py-1.5 text-xs rounded-lg cursor-pointer transition-all duration-150 flex items-center gap-2",r===e.href?"bg-pink-500/10 text-pink-600 dark:text-pink-400":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-800/50"),children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),(0,s.jsx)("span",{className:"font-medium whitespace-nowrap",children:e.label})]},t))})})})]},c)})})]})});function F(e){let{collapsed:t,setCollapsed:r}=e;return(0,a.useEffect)(()=>{let e=()=>{r("true"===localStorage.getItem("sidebar-collapsed"))};return window.addEventListener("toggle-sidebar",e),e(),()=>window.removeEventListener("toggle-sidebar",e)},[r]),(0,s.jsx)(D,{collapsed:t})}var O=r(53311),B=r(66474),U=r(23861),_=r(71007),Q=r(34835),W=r(70306),J=r(63289),G=r.n(J),K=r(47924);let H=[{label:"Dashboard",href:"/",keywords:["dashboard","home","overview","main"]},{label:"Product Management",href:"/products",keywords:["products","product management","inventory"]},{label:"Categories",href:"/catagories",keywords:["categories","category","product categories","classification"]},{label:"Services",href:"/services",keywords:["services","salon services","treatments","beauty services"]},{label:"Offers & Promotions",href:"/offers",keywords:["offers","promotions","deals","discounts","special offers"]},{label:"Appointment Management",href:"/bookings",keywords:["appointments","bookings","schedule","calendar","reservations"]},{label:"E-commerce",href:"/ecommerce",keywords:["ecommerce","shop","online store","products","shopping"]},{label:"Invoice",href:"/invoice-generator",keywords:["invoice","generate"]},{label:"Sales Analytics",href:"/sales",keywords:["sales","analytics","revenue","reports","performance"]},{label:"Customer Support",href:"/chat",keywords:["chat","support","messages","customer service","help"]},{label:"Branch Management",href:"/branches",keywords:["branches","locations","stores","outlets"]},{label:"Membership Plans",href:"/membership",keywords:["membership","plans","subscriptions","loyalty"]},{label:"Membership & LoyaltyPoints Reports",href:"/membershipReport",keywords:["membership reports","member analytics","loyalty reports","points"]},{label:"Staff Management",href:"/staff",keywords:["staff","employees","team","workers","personnel"]},{label:"Booking Approval Page",href:"/bookingstatus",keywords:["booking approval","approval","booking status","confirmation"]},{label:"Daily Tasks",href:"/staffDailyTasks",keywords:["tasks","daily tasks","staff tasks","assignments","todo"]},{label:"Business Reports",href:"/reports",keywords:["reports","business reports","analytics","insights"]},{label:"Customer Management",href:"/customers",keywords:["customers","clients","customer database","client management"]},{label:"User Administration",href:"/users",keywords:["users","administration","user management","accounts"]},{label:"Profile Settings",href:"/profile",keywords:["profile","settings","account","preferences","configuration"]},{label:"Payroll & Commission Management",href:"#future",keywords:["payroll","commission","salary","wages","compensation","staff payment"],isFuture:!0},{label:"AI Product Performance Analytics",href:"#future",keywords:["ai analytics","product performance","artificial intelligence","smart analytics","ai insights"],isFuture:!0},{label:"AI Expense Tracking",href:"#future",keywords:["ai expense","expense tracking","intelligent expenses","smart tracking","automated expenses"],isFuture:!0},{label:"Audit Trail & Activity Logs",href:"#future",keywords:["audit trail","activity logs","monitoring","tracking","security logs"],isFuture:!0}];function V(e){let{className:t}=e,[r,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(-1),x=(0,n.useRouter)(),h=(0,a.useRef)(null),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(""===r.trim()){c([]),m(-1);return}c(H.filter(e=>{let t=r.toLowerCase();return e.label.toLowerCase().includes(t)||e.keywords.some(e=>e.toLowerCase().includes(t))})),m(-1)},[r]),(0,a.useEffect)(()=>{let e=e=>{if("Escape"===e.key&&o){var t;l(!1),null==(t=p.current)||t.blur()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o]),(0,a.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let g=(e,t)=>{var r,s;if(t){alert("This feature is coming soon! Stay tuned for updates."),i(""),l(!1),null==(s=p.current)||s.blur();return}x.push(e),i(""),l(!1),null==(r=p.current)||r.blur()};return(0,s.jsxs)("div",{ref:h,className:(0,A.cn)("relative",t),children:[(0,s.jsx)("div",{className:"relative w-full max-w-md mx-auto",children:(0,s.jsxs)("div",{className:(0,A.cn)("relative flex items-center w-full","bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm","border border-gray-200 dark:border-gray-700","rounded-xl shadow-sm hover:shadow-md transition-all duration-200",o&&"ring-2 ring-pink-500/20 border-pink-300 dark:border-pink-600",t),children:[(0,s.jsx)(K.A,{className:"absolute left-3 w-4 h-4 text-gray-400 dark:text-gray-500 pointer-events-none"}),(0,s.jsx)("input",{ref:p,type:"text",placeholder:"Search pages...",value:r,onChange:e=>i(e.target.value),onFocus:()=>l(!0),onKeyDown:e=>{if(!o){("Enter"===e.key||"ArrowDown"===e.key)&&l(!0);return}if(0!==d.length)switch(e.key){case"ArrowDown":e.preventDefault(),m(e=>e<d.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),m(e=>e>0?e-1:d.length-1);break;case"Enter":if(e.preventDefault(),u>=0&&d[u]){let e=d[u];g(e.href,e.isFuture)}break;case"Escape":var t;l(!1),null==(t=p.current)||t.blur()}},className:(0,A.cn)("w-full pl-10 pr-10 py-2.5 sm:py-3","text-sm sm:text-base text-gray-900 dark:text-gray-100","placeholder-gray-500 dark:placeholder-gray-400","bg-transparent border-0 outline-none","rounded-xl")}),r&&(0,s.jsx)("button",{onClick:()=>{var e;i(""),c([]),l(!1),null==(e=p.current)||e.focus()},className:"absolute right-3 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700  transition-colors duration-200",children:(0,s.jsx)(w.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 dark:text-gray-500"})})]})}),(0,s.jsx)(S.N,{children:o&&(0,s.jsx)(E.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full mt-2 w-full bg-white dark:bg-gray-900 border border-gray-200  dark:border-gray-700 rounded-xl shadow-xl z-50 overflow-hidden max-h-80 overflow-y-auto",children:d.length>0?(0,s.jsx)("div",{className:"py-2",children:d.map((e,t)=>(0,s.jsx)("div",{onClick:()=>g(e.href,e.isFuture),className:(0,A.cn)("px-3 sm:px-4 py-2.5 sm:py-3 cursor-pointer transition-all duration-200","hover:bg-pink-50 dark:hover:bg-pink-900/20","border-l-4 border-transparent hover:border-pink-500",u===t&&"bg-pink-50 dark:bg-pink-900/20 border-pink-500",e.isFuture&&"opacity-75"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(K.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-pink-600 dark:text-pink-400"})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-gray-100 truncate",children:((e,t)=>{if(!t)return e;let r=RegExp("(".concat(t,")"),"gi");return e.split(r).map((e,t)=>r.test(e)?(0,s.jsx)("span",{className:"bg-[#E60076]/20 text-[#E60076] font-medium",children:e},t):e)})(e.label,r)}),e.isFuture&&(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium bg-pink-100 dark:bg-pink-900/30  text-pink-700 dark:text-pink-300 rounded-full",children:"Coming Soon"})]})})]}),(0,s.jsx)(N.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 dark:text-gray-500 flex-shrink-0"})]})},e.href))}):r?(0,s.jsxs)("div",{className:"px-4 py-6 text-center",children:[(0,s.jsx)(K.A,{className:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No results found"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Try searching with different keywords"})]}):null})})]})}var Y=r(40283),q=r(79323),Z=r(56104),$=r(35317);let X=[{title:"Payroll & Commission Management",description:"Manage staff payroll and commission calculations",status:"Soon"},{title:"AI Product Performance Analytics",description:"AI-powered analytics for product performance",status:"Soon"},{title:"AI Expense Tracking",description:"Intelligent expense tracking and categorization",status:"Soon"},{title:"Audit Trail & Activity Logs",description:"Comprehensive audit trails and activity monitoring",status:"Soon"}];function ee(e){var t;let{onToggleSidebar:r,sidebarOpen:i,isMobile:o}=e,l=(0,n.useRouter)(),{user:d,userRole:c}=(0,Y.A)();if("/signin"===(0,n.usePathname)())return null;let[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)([]),[k,w]=(0,a.useState)([]),[N,C]=(0,a.useState)(!1),P=(0,a.useRef)(null),I=(0,a.useRef)(null),M=(0,a.useRef)(null),T=(0,a.useRef)(null),L=(0,a.useRef)(!0),D=(0,a.useRef)(new Set);(0,a.useEffect)(()=>{if(!Z.db)return;let e=(0,$.rJ)(Z.db,"bookings"),t=(0,$.P)(e,(0,$.My)("createdAt","desc")),r=(0,$.aQ)(t,e=>{if(L.current){L.current=!1,e.docs.forEach(e=>{D.current.add(e.id)}),console.log("\uD83D\uDCDA Initial bookings loaded, notifications enabled for new changes");return}e.docChanges().forEach(e=>{let t=e.doc.id,r=e.doc.data();if("added"===e.type){if(!D.current.has(t)){console.log("\uD83D\uDCCC NEW BOOKING FROM FIREBASE/MOBILE:",r);let e=r.services&&Array.isArray(r.services)&&r.services.length>0?r.services[0].serviceName:r.serviceName||r.service||"a service",s={id:t,type:"booking",message:"".concat(r.customerName||r.name||"Customer"," booked ").concat(e),createdAt:r.createdAt};w(e=>[s,...e]),T.current&&(T.current.currentTime=0,T.current.volume=.5,T.current.play().catch(e=>console.log("Sound error (booking):",e))),D.current.add(t)}}else if("modified"===e.type){console.log("\uD83D\uDCCC BOOKING UPDATED FROM FIREBASE/MOBILE:",r);let e=r.services&&Array.isArray(r.services)&&r.services.length>0?r.services[0].serviceName:r.serviceName||r.service||"service",s={id:"".concat(t,"-update-").concat(Date.now()),type:"booking-update",message:"".concat(r.customerName||r.name||"Customer","'s booking (").concat(e,") was updated"),createdAt:r.updatedAt||r.createdAt};w(e=>[s,...e]),T.current&&(T.current.currentTime=0,T.current.volume=.7,T.current.play().catch(e=>console.log("Sound error (booking update):",e)))}})},e=>{console.error("❌ Booking notification listener error:",e)});return()=>r()},[]),(0,a.useEffect)(()=>{if(!Z.db)return;let e=(0,$.rJ)(Z.db,"services"),t=(0,$.P)(e,(0,$.My)("createdAt","desc")),r=(0,$.aQ)(t,e=>{e.docChanges().forEach(e=>{if("added"===e.type){let t=e.doc.data();console.log("\uD83D\uDCCC NEW SERVICE ADDED:",t);let r={id:"service-".concat(e.doc.id),type:"booking",message:'New service "'.concat(t.name||t.serviceName||"Unknown Service",'" was added'),createdAt:t.createdAt};w(e=>[r,...e]),T.current&&(T.current.currentTime=0,T.current.volume=.4,T.current.play().catch(e=>console.log("Sound error (service):",e)))}else if("modified"===e.type){let t=e.doc.data();console.log("\uD83D\uDCCC SERVICE UPDATED:",t);let r={id:"service-update-".concat(e.doc.id,"-").concat(Date.now()),type:"booking-update",message:'Service "'.concat(t.name||t.serviceName||"Unknown Service",'" was updated'),createdAt:t.updatedAt||t.createdAt};w(e=>[r,...e]),T.current&&(T.current.currentTime=0,T.current.volume=.4,T.current.play().catch(e=>console.log("Sound error (service update):",e)))}})},e=>{console.error("❌ Service notification listener error:",e)});return()=>r()},[]),(0,a.useEffect)(()=>{if(!Z.db)return;let e=(0,$.rJ)(Z.db,"chats"),t=(0,$.P)(e,(0,$.My)("createdAt","desc")),r=(0,$.aQ)(t,e=>{e.docChanges().forEach(e=>{if("added"===e.type){let t=e.doc.data();console.log("\uD83D\uDCCC NEW CHAT:",t);let r="admin"===t.senderRole?"Admin":t.senderName||t.sender||"User",s={id:e.doc.id,type:"chat",message:"Message from ".concat(r,": ").concat(t.message||t.text||t.content||"New message"),createdAt:t.createdAt};w(e=>[s,...e]),T.current&&(T.current.currentTime=0,T.current.play().catch(e=>console.log("Sound error (chat):",e)))}})});return()=>r()},[]),(0,a.useEffect)(()=>{N&&k.length>0&&(v(k),w([]))},[N,k]),(0,a.useEffect)(()=>{let e="dark"===(localStorage.getItem("theme")||"light");g(e),document.documentElement.classList.toggle("dark",e)},[]),(0,a.useEffect)(()=>{let e=()=>m(window.scrollY>10);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,a.useEffect)(()=>{let e=e=>{x&&P.current&&!P.current.contains(e.target)&&h(!1),N&&I.current&&!I.current.contains(e.target)&&C(!1),f&&M.current&&!M.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x,N,f]);let R=async e=>{e.preventDefault(),e.stopPropagation();try{let{error:e}=await (0,q.BP)();e?(alert("Error signing out: "+e),h(!1)):(h(!1),l.push("/signin"))}catch(e){alert("Error signing out: "+e),h(!1)}};return(0,s.jsxs)(E.P.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.23,.86,.39,.96]},className:(0,A.cn)("relative z-40 flex items-center justify-between mx-2 mt-3 mr-2 px-3 py-2 rounded-xl shadow-md transition-all duration-300",u?"shadow-lg":"",o?"ml-2":i?"ml-72":"ml-16"),children:[(0,s.jsx)("audio",{ref:T,src:"/notification.mp3",preload:"auto"}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center space-x-4 ",children:[r&&(0,s.jsx)("button",{onClick:r,className:"p-2 rounded-lg bg-pink-100/40 dark:bg-pink-900/20",title:"Toggle Sidebar",type:"button",children:(0,s.jsx)(j.A,{className:"w-4 h-4 text-pink-600 dark:text-pink-300"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("h1",{className:"text-sm font-semibold text-pink-600 dark:text-gray-200",children:"Mirrors Beauty Lounge"}),(0,s.jsxs)("div",{className:"text-[10px] text-gray-600 dark:text-gray-400",children:["Welcome to"," ",(0,s.jsx)("span",{className:(0,A.cn)("relative bg-gradient-to-r from-pink-500 via-pink-400 to-pink-500 text-transparent bg-clip-text",G().className),children:"Your Salon"})]})]})]}),(0,s.jsxs)("div",{className:"relative flex-1 flex items-center justify-center space-x-2 sm:space-x-4 max-w-2xl mx-2 sm:mx-4",children:[(0,s.jsx)("div",{className:"flex-1 max-w-xs sm:max-w-md",children:(0,s.jsx)(V,{className:"w-full"})}),(0,s.jsxs)("div",{className:"relative",ref:M,children:[(0,s.jsxs)("button",{onClick:()=>b(!f),className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg bg-gradient-to-r from-pink-500 to-pink-600  hover:from-pink-600 hover:to-pink-700 text-white shadow-lg hover:shadow-xl  transition-all duration-200 transform hover:scale-105 whitespace-nowrap",children:[(0,s.jsx)(O.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-xs sm:text-sm font-medium hidden xs:inline",children:"Future Modules"}),(0,s.jsx)("span",{className:"text-xs sm:text-sm font-medium xs:hidden",children:"Future"}),(0,s.jsx)(E.P.div,{animate:{rotate:180*!!f},transition:{duration:.2},children:(0,s.jsx)(B.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),(0,s.jsx)(S.N,{children:f&&(0,s.jsxs)(E.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full mt-2 w-72 sm:w-80 bg-white dark:bg-gray-900 border border-pink-200  dark:border-pink-700 rounded-xl shadow-xl z-50 overflow-hidden right-0",children:[(0,s.jsxs)("div",{className:"p-3 sm:p-4 border-b border-pink-100 dark:border-pink-700/40 bg-gradient-to-r  from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-pink-700 dark:text-pink-300",children:"Advanced Future Modules"}),(0,s.jsx)("p",{className:"text-xs text-pink-600 dark:text-pink-400 mt-1",children:"Coming soon - Advanced features for your salon"})]}),(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto",children:X.map((e,t)=>(0,s.jsx)("div",{className:"p-3 sm:p-4 border-b border-gray-100 dark:border-gray-700/40 last:border-b-0  hover:bg-pink-50/50 dark:hover:bg-pink-900/10 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.description})]}),(0,s.jsx)("span",{className:"ml-3 px-2 py-1 text-xs font-medium bg-pink-100 dark:bg-pink-900/30  text-pink-700 dark:text-pink-300 rounded-full",children:e.status})]})},t))}),(0,s.jsx)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 text-center",children:(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"These features are currently in development"})})]})})]})]}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"relative",ref:I,children:[(0,s.jsxs)("button",{onClick:()=>C(!N),className:"relative p-2 rounded-lg bg-pink-100/40 dark:bg-pink-900/20",children:[(0,s.jsx)(U.A,{className:"w-5 h-5 text-pink-600 dark:text-pink-300"}),(k.length>0||y.length>0)&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-500 rounded-full"})]}),N&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-900 border border-pink-200 dark:border-pink-700 rounded-lg shadow-lg z-50",children:[(0,s.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 text-xs font-medium text-gray-600 dark:text-gray-300",children:"Notifications"}),0===y.length?(0,s.jsx)("div",{className:"p-3 text-xs text-gray-500 dark:text-gray-400",children:"No new notifications"}):(0,s.jsx)("ul",{className:"max-h-60 overflow-y-auto",children:y.map(e=>(0,s.jsx)("li",{className:"px-3 py-2 text-xs ".concat("booking"===e.type?"text-pink-700 dark:text-pink-300":"text-blue-700 dark:text-blue-300"," hover:bg-gray-50 dark:hover:bg-gray-800/40 cursor-pointer"),children:e.message},e.id))})]})]}),(0,s.jsx)("div",{className:"relative flex items-center",ref:P,children:d?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>h(!x),className:"flex items-center space-x-2 px-2 sm:px-3 py-1.5 rounded-lg border border-pink-200/40  bg-pink-100/40 dark:bg-pink-900/20 hover:bg-pink-200/50 dark:hover:bg-pink-800/30  shadow-sm transition",children:[(0,s.jsx)("div",{className:"h-6 w-6 rounded-full bg-gradient-to-br from-pink-100/60 to-pink-200/50  flex items-center justify-center border border-pink-200/50",children:(0,s.jsx)(_.A,{className:"h-3.5 w-3.5 text-pink-600"})}),(0,s.jsx)("span",{className:"hidden sm:inline text-xs font-medium text-gray-900 dark:text-gray-200",children:d.displayName||d.email})]}),x&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-52 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl  border border-pink-200/30 dark:border-pink-700/40 rounded-xl shadow-lg z-50",children:[(0,s.jsxs)("div",{className:"p-3 border-b border-pink-100 dark:border-pink-700/40",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-900 dark:text-gray-200 truncate",children:d.displayName||(null==(t=d.email)?void 0:t.split("@")[0])}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:d.email}),(0,s.jsx)("p",{className:"text-xs text-pink-600 capitalize",children:(null==c?void 0:c.role)||"User"})]}),(0,s.jsxs)("div",{className:"p-2 space-y-1",children:[(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),l.push("/profile"),h(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 text-xs font-medium  text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800/40  rounded-lg transition",children:[(0,s.jsx)(_.A,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{children:"Profile"})]}),(0,s.jsxs)("button",{onClick:R,className:"w-full flex items-center space-x-2 px-3 py-2 text-xs font-medium  text-red-600 hover:bg-red-50 dark:hover:bg-red-800/40  rounded-lg transition",children:[(0,s.jsx)(Q.A,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{children:"Sign Out"})]})]})]})]}):(0,s.jsxs)("button",{onClick:()=>l.push("/signin"),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs font-medium  text-pink-700 bg-pink-100/60 hover:bg-pink-200/70  rounded-lg shadow-sm border border-pink-200/50 transition",children:[(0,s.jsx)(W.A,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Sign In"})]})})]})]})}function et(e){let{children:t}=e,{user:r,loading:i}=(0,Y.A)(),o=(0,n.useRouter)(),[l,d]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{d(!0)},[]),(0,a.useEffect)(()=>{!l||i||r||o.push("/signin")},[r,i,o,l]),!l||i)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:(0,s.jsxs)("div",{className:"text-center p-12 bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl border border-white/50",children:[(0,s.jsx)("div",{className:"relative mb-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-blue-200 border-t-blue-600 mx-auto"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-4",children:"Authenticating"}),(0,s.jsx)("p",{className:"text-gray-600 font-medium text-lg mb-4",children:"Verifying your access..."})]})}):r?(0,s.jsx)(s.Fragment,{children:t}):null}function er(){let e=(0,a.useRef)(null),t=(0,a.useRef)(0),r=(0,a.useRef)({});return(0,a.useEffect)(()=>{if(e.current=new Audio("/notification.mp3"),e.current.volume=.5,!Z.db)return;let s=(0,$.P)((0,$.rJ)(Z.db,"chatRooms"),(0,$.My)("lastMessageAt","desc")),a=(0,$.aQ)(s,s=>{try{s.forEach(s=>{let a=s.data(),n=r.current[s.id];if(n&&a.lastMessage&&a.lastMessage!==n){let r=Date.now();if(r-t.current>600){var i;t.current=r,null==(i=e.current)||i.play().catch(()=>{})}}r.current[s.id]=a.lastMessage||""})}catch(e){console.error("GlobalChatNotifier snapshot error",e)}});return()=>{a()}},[]),null}var es=r(78749),ea=r(15273),en=r(9771);function ei(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[l,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(50),m=(0,a.useRef)(null),x=(0,a.useRef)([]),h=(0,a.useRef)({bookings:!0,services:!0,chats:!0});(0,a.useEffect)(()=>(m.current=new Audio("/notification.mp3"),m.current.volume=.2,()=>{x.current.forEach(e=>e())}),[]);let p=e=>{let t={...e,id:Date.now().toString(),timestamp:new Date};n(e=>[t,...e.slice(0,c-1)]),e.notificationTriggered&&l&&m.current&&(m.current.currentTime=0,m.current.play().catch(console.error))};return e?(0,s.jsxs)("div",{className:"fixed bottom-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-xl z-50 overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gray-50 border-b border-gray-200 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-800",children:"Notification Debugger"})]}),(0,s.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(es.A,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsxs)("button",{onClick:i?()=>{x.current.forEach(e=>e()),x.current=[],o(!1)}:()=>{if(!Z.db)return void console.error("Firebase not initialized");h.current={bookings:!0,services:!0,chats:!0},x.current.forEach(e=>e()),x.current=[];let e=(0,$.rJ)(Z.db,"bookings"),t=(0,$.P)(e,(0,$.My)("createdAt","desc")),r=(0,$.aQ)(t,e=>{let t=e.metadata.fromCache?"cache":"server";if(h.current.bookings){h.current.bookings=!1,p({type:"bookings",changeType:"added",docId:"initial-load",data:{count:e.docs.length},source:t,notificationTriggered:!1});return}e.docChanges().forEach(e=>{let r="added"===e.type||"modified"===e.type;p({type:"bookings",changeType:e.type,docId:e.doc.id,data:e.doc.data(),source:t,notificationTriggered:r})})}),s=(0,$.rJ)(Z.db,"services"),a=(0,$.P)(s,(0,$.My)("createdAt","desc")),n=(0,$.aQ)(a,e=>{let t=e.metadata.fromCache?"cache":"server";if(h.current.services){h.current.services=!1,p({type:"services",changeType:"added",docId:"initial-load",data:{count:e.docs.length},source:t,notificationTriggered:!1});return}e.docChanges().forEach(e=>{let r="added"===e.type||"modified"===e.type;p({type:"services",changeType:e.type,docId:e.doc.id,data:e.doc.data(),source:t,notificationTriggered:r})})}),i=(0,$.rJ)(Z.db,"chats"),l=(0,$.P)(i,(0,$.My)("createdAt","desc"));x.current=[r,n,(0,$.aQ)(l,e=>{let t=e.metadata.fromCache?"cache":"server";if(h.current.chats){h.current.chats=!1,p({type:"chats",changeType:"added",docId:"initial-load",data:{count:e.docs.length},source:t,notificationTriggered:!1});return}e.docChanges().forEach(e=>{let r="added"===e.type;p({type:"chats",changeType:e.type,docId:e.doc.id,data:e.doc.data(),source:t,notificationTriggered:r})})})],o(!0)},className:"px-3 py-1 rounded text-sm font-medium ".concat(i?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:[i?"Stop":"Start"," Listening"]}),(0,s.jsx)("button",{onClick:()=>{n([])},className:"px-3 py-1 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded text-sm font-medium",children:"Clear"}),(0,s.jsx)("button",{onClick:()=>d(!l),className:"p-1 rounded ".concat(l?"text-green-600":"text-gray-400"),children:l?(0,s.jsx)(ea.A,{className:"w-4 h-4"}):(0,s.jsx)(en.A,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"p-3 max-h-64 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-600 mb-2",children:["Events: ",r.length," | Listening: ",i?"\uD83D\uDFE2":"\uD83D\uDD34"]}),0===r.length?(0,s.jsx)("div",{className:"text-center text-gray-500 py-4",children:'No events yet. Click "Start Listening" to monitor Firebase changes.'}):(0,s.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,s.jsxs)("div",{className:"p-2 rounded border text-xs ".concat("initial-load"===e.docId?"bg-gray-100 border-gray-300":e.notificationTriggered?"bg-green-100 border-green-300":"bg-blue-100 border-blue-300"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:(e=>{switch(e){case"bookings":return"\uD83D\uDCC5";case"services":return"\uD83D\uDEE0️";case"chats":return"\uD83D\uDCAC";default:return"\uD83D\uDCC4"}})(e.type)}),(0,s.jsx)("span",{className:"font-medium",children:e.type}),(0,s.jsx)("span",{className:"text-blue-600",children:e.changeType}),e.notificationTriggered&&(0,s.jsx)("span",{className:"text-green-600",children:"\uD83D\uDD14"})]}),(0,s.jsx)("span",{className:"text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),(0,s.jsxs)("div",{className:"text-gray-600",children:[(0,s.jsxs)("div",{children:["ID: ",e.docId]}),(0,s.jsxs)("div",{children:["Source: ",e.source]}),e.data.customerName&&(0,s.jsxs)("div",{children:["Customer: ",e.data.customerName]}),e.data.name&&(0,s.jsxs)("div",{children:["Name: ",e.data.name]}),void 0!==e.data.count&&(0,s.jsxs)("div",{children:["Count: ",e.data.count]})]})]},e.id))})]})]}):(0,s.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,s.jsx)("button",{onClick:()=>t(!0),className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg transition-colors",title:"Show Notification Debugger",children:(0,s.jsx)(U.A,{className:"w-5 h-5"})})})}function eo(e){let{children:t}=e,r=(0,n.usePathname)(),[i,o]=(0,a.useState)(!1),[l,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=()=>{let e=window.innerWidth<768;u(e),e?o(!1):d(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),"/test"===r)?t:(0,s.jsx)(Y.O,{children:"/signin"===r||"/test"===r?t:(0,s.jsxs)(et,{children:[(0,s.jsx)(er,{}),(0,s.jsx)(ei,{}),(0,s.jsxs)("div",{className:"min-h-screen bg-white",children:[c&&i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300",onClick:()=>{c&&i&&o(!1)},style:{touchAction:"none"}}),(0,s.jsx)(ee,{onToggleSidebar:()=>{c?o(e=>!e):d(e=>!e)},sidebarOpen:c?i:!l,isMobile:c}),(0,s.jsx)(F,{collapsed:l,setCollapsed:d}),(0,s.jsx)("main",{className:"\n                transition-all duration-300 ease-out \n                pt-16 pb-4 px-1\n                sm:pt-16 sm:pb-6 sm:px-2\n                md:pt-16 md:pb-6 md:px-4\n                ".concat(c?"ml-0":l?"ml-14":"ml-72","\n                w-full\n              "),children:(0,s.jsx)("div",{className:"content-container max-w-full",children:t})})]})]})})}}},e=>{e.O(0,[1695,7690,9556,9135,7210,1748,6061,9234,1840,9323,8441,5964,7358],()=>e(e.s=25154)),_N_E=e.O()}]);