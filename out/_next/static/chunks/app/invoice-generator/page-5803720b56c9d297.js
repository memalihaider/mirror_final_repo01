(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9826],{32372:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var r=t(95155),n=t(12115),s=t(26597),o=t(76118),l=t(56104),c=t(35317),i=t(931);function d(){let[e,a]=(0,n.useState)({bookingId:Math.random().toString(36).substring(2,12).toUpperCase(),name:"",email:"",phone:"",service:"",category:"",branch:"",date:"",time:"",staff:"",price:0,brandEmail:"mirrorbeauty@gmail.com",brandPhone:"+971-50-1234567"}),[t,d]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),[p,b]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),[u,v]=(0,n.useState)([]),[j,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,c.aQ)((0,c.rJ)(l.db,"services"),e=>{d(e.docs.map(e=>({id:e.id,...e.data()})))}),a=(0,c.aQ)((0,c.rJ)(l.db,"categories"),e=>{m(e.docs.map(e=>e.data().name))}),t=(0,c.aQ)((0,c.rJ)(l.db,"branches"),e=>{b(e.docs.map(e=>e.data().name))}),r=(0,c.aQ)((0,c.rJ)(l.db,"staff"),e=>{g(e.docs.map(e=>e.data().name))});return()=>{e(),a(),t(),r()}},[]);let f=r=>{let{name:n,value:s}=r.target;if("service"===n){let r=t.find(e=>e.name===s);a({...e,service:s,price:r?r.price:0})}else a({...e,[n]:s})},y=function(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=new s.Ay("p","mm",[148,210]);t.setFont("helvetica","bold"),t.setFontSize(16),t.text("Mirror Beauty Lounge",74,18,{align:"center"}),t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Email: ".concat(e.brandEmail),74,25,{align:"center"}),t.text("Phone: ".concat(e.brandPhone),74,30,{align:"center"}),t.setFontSize(12),t.text("Invoice Receipt",74,38,{align:"center"});let r=50;return t.setFontSize(10),t.text("Booking ID: ".concat(e.bookingId),20,r),t.text("Customer: ".concat(e.name),20,r+=7),t.text("Email: ".concat(e.email),20,r+=7),t.text("Phone: ".concat(e.phone||"-"),20,r+=7),t.text("Branch: ".concat(e.branch),20,r+=7),t.text("Date: ".concat(e.date),20,r+=7),t.text("Time: ".concat(e.time),20,r+=7),t.text("Staff: ".concat(e.staff),20,r+=7),(0,o.Ay)(t,{startY:r+10,theme:"grid",head:[["Service","Qty","Price (AED)","Total (AED)"]],body:[[e.service,"1","AED ".concat(e.price.toFixed(2)),"AED ".concat(e.price.toFixed(2))]],styles:{fontSize:10},headStyles:{fillColor:[0,123,255]},margin:{left:15,right:15}}),t.setFontSize(10),t.text("Thank you for your booking! We look forward to serving you.",74,t.internal.pageSize.height-20,{align:"center"}),a&&t.save("Invoice_".concat(e.bookingId,".pdf")),t},S=async()=>{try{v(a=>[...a,e]),await (0,c.gS)((0,c.rJ)(l.db,"customInvoices"),{...e,createdAt:(0,c.O5)()}),y(e,!0),a({bookingId:Math.random().toString(36).substring(2,12).toUpperCase(),name:"",email:"",phone:"",service:"",category:"",branch:"",date:"",time:"",staff:"",price:0,brandEmail:"mirrorbeauty@gmail.com",brandPhone:"+971-50-1234567"})}catch(e){console.error("Error saving invoice:",e),alert("Failed to save invoice. Please try again.")}};return(0,r.jsx)(i.A,{children:(0,r.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Generate Invoice Receipt"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 bg-white shadow p-4 rounded-lg mb-8",children:[(0,r.jsx)("input",{type:"text",name:"name",placeholder:"Customer Name",value:e.name,onChange:f,className:"p-3 border rounded-lg"}),(0,r.jsx)("input",{type:"email",name:"email",placeholder:"Email Address",value:e.email,onChange:f,className:"p-3 border rounded-lg"}),(0,r.jsx)("input",{type:"text",name:"phone",placeholder:"Phone",value:e.phone,onChange:f,className:"p-3 border rounded-lg"}),(0,r.jsx)("input",{type:"email",name:"brandEmail",placeholder:"Brand Email",value:e.brandEmail,onChange:f,className:"p-3 border rounded-lg"}),(0,r.jsx)("input",{type:"text",name:"brandPhone",placeholder:"Brand Phone",value:e.brandPhone,onChange:f,className:"p-3 border rounded-lg"}),(0,r.jsxs)("select",{name:"service",value:e.service,onChange:f,className:"p-3 border rounded-lg",children:[(0,r.jsx)("option",{value:"",children:"Select Service"}),t.map(e=>(0,r.jsxs)("option",{value:e.name,children:[e.name," - AED ",e.price]},e.id))]}),(0,r.jsxs)("select",{name:"category",value:e.category,onChange:f,className:"p-3 border rounded-lg",children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),h.map((e,a)=>(0,r.jsx)("option",{value:e,children:e},a))]}),(0,r.jsxs)("select",{name:"branch",value:e.branch,onChange:f,className:"p-3 border rounded-lg",children:[(0,r.jsx)("option",{value:"",children:"Select Branch"}),p.map((e,a)=>(0,r.jsx)("option",{value:e,children:e},a))]}),(0,r.jsx)("input",{type:"date",name:"date",value:e.date,onChange:f,className:"p-3 border rounded-lg"}),(0,r.jsx)("input",{type:"time",name:"time",value:e.time,onChange:f,className:"p-3 border rounded-lg"}),(0,r.jsxs)("select",{name:"staff",value:e.staff,onChange:f,className:"p-3 border rounded-lg",children:[(0,r.jsx)("option",{value:"",children:"Select Staff"}),x.map((e,a)=>(0,r.jsx)("option",{value:e,children:e},a))]}),(0,r.jsx)("button",{onClick:S,className:"mt-4 py-3 px-6 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Generate PDF Invoice"})]}),(0,r.jsx)("div",{className:"mb-6 text-center",children:(0,r.jsx)("button",{onClick:()=>N(!j),className:"py-2 px-6 bg-gray-700 text-white rounded-lg hover:bg-gray-800",children:j?"Hide Invoice History":"Show Invoice History"})}),j&&(0,r.jsxs)("div",{className:"bg-white shadow p-6 rounded-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Invoice History"}),0===u.length?(0,r.jsx)("p",{className:"text-gray-500",children:"No invoices generated yet."}):(0,r.jsxs)("table",{className:"w-full border",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"border p-2",children:"Booking ID"}),(0,r.jsx)("th",{className:"border p-2",children:"Customer"}),(0,r.jsx)("th",{className:"border p-2",children:"Email"}),(0,r.jsx)("th",{className:"border p-2",children:"Phone"}),(0,r.jsx)("th",{className:"border p-2",children:"Service"}),(0,r.jsx)("th",{className:"border p-2",children:"Price"}),(0,r.jsx)("th",{className:"border p-2",children:"Branch"}),(0,r.jsx)("th",{className:"border p-2",children:"Date"}),(0,r.jsx)("th",{className:"border p-2",children:"Time"}),(0,r.jsx)("th",{className:"border p-2",children:"Staff"})]})}),(0,r.jsx)("tbody",{children:u.map((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border p-2",children:e.bookingId}),(0,r.jsx)("td",{className:"border p-2",children:e.name}),(0,r.jsx)("td",{className:"border p-2",children:e.email}),(0,r.jsx)("td",{className:"border p-2",children:e.phone}),(0,r.jsx)("td",{className:"border p-2",children:e.service}),(0,r.jsxs)("td",{className:"border p-2",children:["AED ",e.price]}),(0,r.jsx)("td",{className:"border p-2",children:e.branch}),(0,r.jsx)("td",{className:"border p-2",children:e.date}),(0,r.jsx)("td",{className:"border p-2",children:e.time}),(0,r.jsx)("td",{className:"border p-2",children:e.staff})]},a))})]})]})]})})}},51891:(e,a,t)=>{Promise.resolve().then(t.bind(t,32372))}},e=>{e.O(0,[9135,7210,3930,5033,1748,6373,6118,9323,931,8441,5964,7358],()=>e(e.s=51891)),_N_E=e.O()}]);