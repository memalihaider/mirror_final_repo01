(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1129],{931:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(95155),s=a(12115),l=a(40283),i=a(35695);function d(e){let{children:t}=e,{userRole:a,loading:d}=(0,l.A)(),n=(0,i.usePathname)(),c=(0,i.useRouter)(),[o,u]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(!d&&a){let e=n.split("/")[1]||"dashboard",t=a.accessPages||[];"admin"===a.role||t.includes(e)?u(!0):(u(!1),c.replace("/access-denied"))}},[d,a,n,c]),d||!a)?(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"}),(0,r.jsx)("span",{className:"ml-3 text-pink-600",children:"Checking access..."})]}):o?(0,r.jsx)(r.Fragment,{children:t}):null}},2578:(e,t,a)=>{Promise.resolve().then(a.bind(a,92566))},4229:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},40283:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,O:()=>c});var r=a(95155),s=a(12115),l=a(79323),i=a(56104);let d=(0,s.createContext)({user:null,userRole:null,loading:!0,isAdmin:!1,error:null,accessiblePages:[],canAccessPage:()=>!1}),n=()=>(0,s.useContext)(d),c=e=>{let{children:t}=e,[a,n]=(0,s.useState)(null),[c,o]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),[p,h]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e,t=!0;return(async()=>{try{m(!0),await (0,i.AU)(),e=(0,l.Bh)(async e=>{if(t){if(n(e),g(null),e)try{let a=await (0,l.uG)(e.uid);if(!a&&e.email){let t="ahmadxeikh786@gmail.com"===e.email?"admin":"user";await (0,l.yS)(e.uid,e.email,t,e.displayName||void 0,[]),a=await (0,l.uG)(e.uid)}(null==a?void 0:a.role)!=="admin"&&"ahmadxeikh786@gmail.com"===e.email&&(await (0,l.yS)(e.uid,e.email,"admin",e.displayName||void 0,[]),a=await (0,l.uG)(e.uid)),t&&(o(a),h((null==a?void 0:a.accessPages)||[]))}catch(e){console.error("Error getting user role:",e),t&&g("Failed to load user role")}else t&&(o(null),h([]));t&&m(!1)}})}catch(e){console.error("Firebase initialization error:",e),t&&(g("Failed to initialize authentication"),m(!1))}})(),()=>{t=!1,e&&e()}},[]);let y=(null==c?void 0:c.role)==="admin";return(0,r.jsx)(d.Provider,{value:{user:a,userRole:c,loading:u,isAdmin:y,error:x,accessiblePages:p,canAccessPage:e=>!!c&&("admin"===c.role||p.includes(e))},children:t})}},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(52596),s=a(39688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},66932:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},84616:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},92566:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(95155),s=a(12115),l=a(38274),i=a(60760),d=a(19946);let n=(0,d.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),c=(0,d.A)("warehouse",[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);var o=a(33109),u=a(84616);let m=(0,d.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var x=a(62525),g=a(54416),p=a(4229),h=a(47924),y=a(66932);let b=(0,d.A)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),v=(0,d.A)("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);var j=a(59434);function f(e){let{products:t,onFilteredProducts:a,className:d}=e,[n,c]=(0,s.useState)(""),[o,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)("name"),[p,f]=(0,s.useState)("asc"),[N,k]=(0,s.useState)("all"),[w,A]=(0,s.useState)({min:"",max:""}),[S,C]=(0,s.useState)("all"),M=(0,s.useRef)(null),P=(0,s.useRef)(null),E=Array.from(new Set(t.map(e=>e.category))).filter(Boolean);(0,s.useEffect)(()=>{let e=[...t];if(n.trim()){let t=n.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))}"all"!==N&&(e=e.filter(e=>e.category===N)),w.min&&(e=e.filter(e=>e.price>=Number(w.min))),w.max&&(e=e.filter(e=>e.price<=Number(w.max))),"all"!==S&&(e=e.filter(e=>{switch(S){case"in-stock":return e.stock>=15;case"low-stock":return e.stock>0&&e.stock<15;case"out-of-stock":return 0===e.stock;default:return!0}})),e.sort((e,t)=>{let a=e[m],r=t[m];return("string"==typeof a&&(a=a.toLowerCase(),r=r.toLowerCase()),"asc"===p)?a<r?-1:+(a>r):a>r?-1:+(a<r)}),a(e)},[n,N,w,S,m,p,t,a]),(0,s.useEffect)(()=>{let e=e=>{M.current&&!M.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let F=()=>{let e=0;return"all"!==N&&e++,(w.min||w.max)&&e++,"all"!==S&&e++,e};return(0,r.jsxs)("div",{ref:M,className:(0,j.cn)("relative w-full",d),children:[(0,r.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,r.jsx)("div",{className:"flex-1 relative",children:(0,r.jsxs)("div",{className:(0,j.cn)("relative flex items-center w-full","bg-white dark:bg-gray-800 backdrop-blur-sm","border border-gray-200 dark:border-gray-700","rounded-xl shadow-sm hover:shadow-md transition-all duration-200","focus-within:ring-2 focus-within:ring-blue-500/20 focus-within:border-blue-300 dark:focus-within:border-blue-600"),children:[(0,r.jsx)(h.A,{className:"absolute left-3 w-4 h-4 text-gray-400 dark:text-gray-500 pointer-events-none"}),(0,r.jsx)("input",{ref:P,type:"text",placeholder:"Search products by name or category...",value:n,onChange:e=>c(e.target.value),className:(0,j.cn)("w-full pl-10 pr-10 py-3","text-sm text-gray-900 dark:text-gray-100","placeholder-gray-500 dark:placeholder-gray-400","bg-transparent border-0 outline-none","rounded-xl")}),n&&(0,r.jsx)("button",{onClick:()=>{var e;c(""),null==(e=P.current)||e.focus()},className:"absolute right-3 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700  transition-colors duration-200",children:(0,r.jsx)(g.A,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"})})]})}),(0,r.jsxs)("button",{onClick:()=>u(!o),className:(0,j.cn)("relative flex items-center gap-2 px-4 py-3 rounded-xl border transition-all duration-200","bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700","border-gray-200 dark:border-gray-700",o&&"ring-2 ring-blue-500/20 border-blue-300 dark:border-blue-600"),children:[(0,r.jsx)(y.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Filters"}),F()>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:F()})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"px-3 py-3 rounded-l-xl border border-r-0 border-gray-200 dark:border-gray-700  bg-white dark:bg-gray-800 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[(0,r.jsx)("option",{value:"name",children:"Name"}),(0,r.jsx)("option",{value:"price",children:"Price"}),(0,r.jsx)("option",{value:"stock",children:"Stock"}),(0,r.jsx)("option",{value:"category",children:"Category"})]}),(0,r.jsx)("button",{onClick:()=>f("asc"===p?"desc":"asc"),className:"px-3 py-3 rounded-r-xl border border-gray-200 dark:border-gray-700  bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700  transition-colors duration-200",children:"asc"===p?(0,r.jsx)(b,{className:"w-4 h-4"}):(0,r.jsx)(v,{className:"w-4 h-4"})})]})]}),(0,r.jsx)(i.N,{children:o&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full mt-2 w-full bg-white dark:bg-gray-900 border border-gray-200  dark:border-gray-700 rounded-xl shadow-xl z-50 p-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),(0,r.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg  bg-white dark:bg-gray-800 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[(0,r.jsx)("option",{value:"all",children:"All Categories"}),E.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price Range (AED)"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"number",placeholder:"Min",value:w.min,onChange:e=>A({...w,min:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg  bg-white dark:bg-gray-800 text-sm outline-none focus:ring-2 focus:ring-blue-500/20"}),(0,r.jsx)("input",{type:"number",placeholder:"Max",value:w.max,onChange:e=>A({...w,max:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg  bg-white dark:bg-gray-800 text-sm outline-none focus:ring-2 focus:ring-blue-500/20"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Stock Status"}),(0,r.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg  bg-white dark:bg-gray-800 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[(0,r.jsx)("option",{value:"all",children:"All Stock Levels"}),(0,r.jsx)("option",{value:"in-stock",children:"In Stock (15+)"}),(0,r.jsx)("option",{value:"low-stock",children:"Low Stock (1-14)"}),(0,r.jsx)("option",{value:"out-of-stock",children:"Out of Stock (0)"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[F()," filter",1!==F()?"s":""," active"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{c(""),k("all"),A({min:"",max:""}),C("all"),x("name"),f("asc")},className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800  dark:hover:text-gray-200 transition-colors duration-200",children:"Clear All"}),(0,r.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700  transition-colors duration-200",children:"Apply"})]})]})]})})]})}var N=a(35317),k=a(77505),w=a(56104),A=a(931),S=a(66766);function C(){let[e,t]=(0,s.useState)("products"),[a,d]=(0,s.useState)([]),[h,y]=(0,s.useState)([]),[b,v]=(0,s.useState)(!0),[j,C]=(0,s.useState)(!1),[M,P]=(0,s.useState)(null),[E,F]=(0,s.useState)({name:"",category:"",price:"",stock:"",status:"active",image:"",imageFile:null,description:""}),[D,L]=(0,s.useState)(!1),[O,H]=(0,s.useState)({}),[q,z]=(0,s.useState)([]),[I,V]=(0,s.useState)({}),R=[{id:"products",label:"Products",icon:n,color:"bg-blue-500"},{id:"inventory",label:"Inventory",icon:c,color:"bg-green-500"},{id:"sales",label:"Sales",icon:o.A,color:"bg-purple-500"},{id:"orders",label:"Orders",icon:u.A,color:"bg-indigo-500"}];(0,s.useEffect)(()=>{if(!w.db)return;v(!0);let e=(0,N.rJ)(w.db,"products"),t=(0,N.P)(e,(0,N.My)("createdAt","asc")),a=(0,N.aQ)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));d(t),y(t),v(!1)},e=>{console.error("Products snapshot error",e),v(!1)});return()=>a()},[]),(0,s.useEffect)(()=>{if(!w.db)return;let e=(0,N.rJ)(w.db,"productOrders"),t=(0,N.P)(e,(0,N.My)("createdAt","desc")),a=(0,N.aQ)(t,e=>{z(e.docs.map(e=>({id:e.id,...e.data()})))},e=>{console.error("Orders snapshot error",e)});return()=>a()},[]);let _=()=>{C(!1),P(null),F({name:"",category:"",price:"",stock:"",status:"active",image:"",imageFile:null,description:""}),L(!1)},G=async e=>{var t,a,r,s;if(null==e||e.preventDefault(),!(null==(t=E.name)?void 0:t.trim())||!(null==(a=E.category)?void 0:a.trim()))return void alert("Please fill all required fields.");if(!E.price||isNaN(Number(E.price)))return void alert("Please enter valid price.");if(!E.stock||isNaN(Number(E.stock)))return void alert("Please enter valid stock.");L(!0);try{let e=E.image||"";if(E.imageFile)try{let t=(0,k.KR)(w.IG,"products/".concat(Date.now(),"-").concat(E.imageFile.name));await (0,k.D)(t,E.imageFile),e=await (0,k.qk)(t),console.log("✅ Image uploaded:",e)}catch(e){console.error("❌ Image upload failed:",e),alert("Image upload failed. Check Firebase Storage rules."),L(!1);return}M?await (0,N.mZ)((0,N.H9)(w.db,"products",M),{name:E.name.trim(),category:E.category.trim(),price:Number(E.price),stock:Number(E.stock),status:E.status,image:e,description:(null==(r=E.description)?void 0:r.trim())||"",updatedAt:(0,N.O5)()}):await (0,N.gS)((0,N.rJ)(w.db,"products"),{name:E.name.trim(),category:E.category.trim(),price:Number(E.price),stock:Number(E.stock),status:E.status,image:e,description:(null==(s=E.description)?void 0:s.trim())||"",sold:0,createdAt:(0,N.O5)()}),_()}catch(e){console.error("Error saving product:",e),alert("Error saving product."),L(!1)}},Q=async e=>{if(e&&confirm("Are you sure you want to delete this product?"))try{await (0,N.kd)((0,N.H9)(w.db,"products",e))}catch(e){console.error(e),alert("Error deleting product.")}},J=async(e,t)=>{if(e){V(t=>({...t,[e]:!0}));try{let a=(0,N.H9)(w.db,"productOrders",e);await (0,N.mZ)(a,{status:t,updatedAt:N.Dc.now()})}catch(e){console.error("Failed to update order status",e),alert("Could not update status. Check console.")}finally{V(t=>({...t,[e]:!1}))}}},T=e=>{let t=null!=e?e:0;return 0===t?{label:"Out of Stock",color:"text-red-600 bg-red-50"}:t<15?{label:"Low Stock",color:"text-yellow-600 bg-yellow-50"}:{label:"In Stock",color:"text-green-600 bg-green-50"}},B=a.reduce((e,t)=>e+(t.sold||0)*(t.price||0),0);return(0,r.jsx)(A.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"E-Commerce Dashboard"}),("products"===e||"inventory"===e)&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(f,{products:a,onFilteredProducts:y})}),(0,r.jsx)("div",{className:"flex gap-2 mb-6",children:R.map(a=>(0,r.jsxs)("button",{onClick:()=>t(a.id),className:"px-4 py-2 rounded ".concat(e===a.id?"bg-gray-900 text-white":"bg-white text-gray-900 border"),children:[(0,r.jsx)(a.icon,{className:"inline-block w-4 h-4 mr-1"})," ",a.label]},a.id))}),(0,r.jsx)(i.N,{mode:"wait",children:(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:["products"===e&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Products"}),(0,r.jsxs)("button",{onClick:()=>{F({name:"",category:"",price:"",stock:"",status:"active",image:"",imageFile:null,description:""}),P(null),C(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg",children:[(0,r.jsx)(u.A,{})," Add Product"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>{let t=T(e.stock),a=!!O[e.id||""],s=e.description||"";return(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl border p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,r.jsx)("div",{className:"font-semibold text-lg",children:e.name}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t.color),children:t.label})]}),s&&(0,r.jsxs)("div",{className:"text-gray-700 text-sm mb-2",children:[a?s:s.slice(0,100),s.length>100&&(0,r.jsx)("button",{onClick:()=>H(t=>({...t,[e.id||""]:!a})),className:"text-blue-600 ml-1",children:a?"Show Less":"Read More"})]}),(0,r.jsxs)("div",{children:["AED",e.price]}),(0,r.jsxs)("div",{children:[e.stock," in stock"]}),e.image&&(0,r.jsx)("img",{src:e.image,alt:e.name,className:"mt-2 w-full h-32 object-cover rounded"}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,r.jsxs)("button",{onClick:()=>{var t,a,r,s;F({name:e.name||"",category:e.category||"",price:null!=(r=null==(t=e.price)?void 0:t.toString())?r:"",stock:null!=(s=null==(a=e.stock)?void 0:a.toString())?s:"",status:e.status||"active",image:e.image||"",imageFile:null,description:e.description||""}),P(e.id||null),C(!0)},className:"bg-yellow-500 px-3 py-1 rounded text-white flex items-center gap-1",children:[(0,r.jsx)(m,{})," Edit"]}),(0,r.jsxs)("button",{onClick:()=>Q(e.id),className:"bg-red-600 px-3 py-1 rounded text-white flex items-center gap-1",children:[(0,r.jsx)(x.A,{})," Delete"]})]})]},e.id)})})]}),"inventory"===e&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Inventory"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:h.map(e=>{let t=T(e.stock);return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsx)("span",{className:t.color,children:t.label})]}),(0,r.jsxs)("div",{children:[e.stock," in stock"]})]},e.id)})})]}),"sales"===e&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Sales"}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:["Total Revenue: AED",B]})]}),"orders"===e&&(0,r.jsxs)("div",{className:"p-4 max-w-6xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold mb-4 text-pink-600",children:"Product Orders"}),0===q.length&&(0,r.jsx)("div",{className:"text-center py-10 text-gray-500",children:"No product orders found."}),(0,r.jsx)("div",{className:"space-y-4",children:q.map(e=>{var t,a,s;return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md border p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-sm font-semibold",children:e.customerName||"Customer"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.customerEmail}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Order type: ",(0,r.jsx)("span",{className:"font-medium",children:e.orderType})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Payment: ",(0,r.jsx)("span",{className:"font-medium",children:e.paymentMethod})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Placed"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:(e=>{try{if(!e)return"—";if(e.toDate)return e.toDate().toLocaleString();if(e.seconds)return new Date(1e3*e.seconds).toLocaleString();return new Date(e).toLocaleString()}catch(e){return"—"}})(e.createdAt)}),(0,r.jsxs)("p",{className:"text-xs mt-1",children:["Status: ",(0,r.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[12px] ".concat("cancelled"===e.status?"bg-red-100 text-red-700":"delivered"===e.status?"bg-green-100 text-green-700":"bg-yellow-50 text-yellow-700"),children:e.status||"order"})]})]})]}),(0,r.jsx)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3",children:(e.products||[]).map((e,t)=>{var a,s,l;return(0,r.jsxs)("div",{className:"flex items-center gap-3 border rounded-lg p-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-md overflow-hidden relative flex-shrink-0",children:e.image?(0,r.jsx)(S.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-500",children:"No image"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",children:e.name}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[(null!=(a=e.price)?a:0).toFixed?(null!=(s=e.price)?s:0).toFixed(2):e.price," AED"]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Qty: ",null!=(l=e.quantity)?l:1]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Category: ",e.category||"—"]})]})]},e.id||t)})}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Delivery address"}),(0,r.jsx)("p",{className:"text-sm",children:e.deliveryAddress||"—"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Total"}),(0,r.jsxs)("p",{className:"text-lg font-semibold",children:[(null!=(t=e.totalAmount)?t:0).toString().startsWith("-")?(-((null!=(a=e.totalAmount)?a:0)*1)).toFixed(2):(null!=(s=e.totalAmount)?s:0).toFixed(2)," AED"]}),(0,r.jsxs)("div",{className:"mt-2 flex gap-2 justify-end",children:[(0,r.jsx)("button",{disabled:I[e.id||""],onClick:()=>J(e.id,"cancelled"),className:"px-3 py-1 text-xs rounded bg-red-50 text-red-700 border border-red-100 disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{disabled:I[e.id||""],onClick:()=>J(e.id,"delivered"),className:"px-3 py-1 text-xs rounded bg-green-50 text-green-700 border border-green-100 disabled:opacity-50",children:"Deliver"}),(0,r.jsx)("button",{disabled:I[e.id||""],onClick:()=>J(e.id,"past"),className:"px-3 py-1 text-xs rounded bg-gray-50 text-gray-700 border border-gray-100 disabled:opacity-50",children:"Past"}),(0,r.jsx)("button",{disabled:I[e.id||""],onClick:()=>J(e.id,"upcoming"),className:"px-3 py-1 text-xs rounded bg-indigo-50 text-indigo-700 border border-indigo-100 disabled:opacity-50",children:"Upcoming"})]})]})]})]},e.id)})})]})]},e)}),(0,r.jsx)(i.N,{children:j&&(0,r.jsx)(l.P.div,{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,r.jsxs)(l.P.div,{className:"bg-white p-6 rounded-lg w-96",initial:{scale:.9},animate:{scale:1},exit:{scale:.9},children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4",children:M?"Edit Product":"Add Product"}),(0,r.jsxs)("form",{onSubmit:e=>{G(e)},className:"space-y-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Name",value:E.name||"",onChange:e=>F({...E,name:e.target.value}),className:"w-full border p-2"}),(0,r.jsx)("input",{type:"text",placeholder:"Category",value:E.category||"",onChange:e=>F({...E,category:e.target.value}),className:"w-full border p-2"}),(0,r.jsx)("input",{type:"number",placeholder:"Price",value:E.price||"",onChange:e=>F({...E,price:e.target.value}),className:"w-full border p-2"}),(0,r.jsx)("input",{type:"number",placeholder:"Stock",value:E.stock||"",onChange:e=>F({...E,stock:e.target.value}),className:"w-full border p-2"}),(0,r.jsx)("textarea",{placeholder:"Description",value:E.description||"",onChange:e=>F({...E,description:e.target.value}),className:"w-full border p-2",rows:3}),(0,r.jsxs)("select",{value:E.status||"active",onChange:e=>F({...E,status:e.target.value}),className:"w-full border p-2",children:[(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&F({...E,imageFile:a})},className:"w-full border p-2"}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:_,className:"px-3 py-1 bg-gray-300 rounded",children:(0,r.jsx)(g.A,{})}),(0,r.jsx)("button",{type:"submit",disabled:D,className:"px-3 py-1 bg-blue-600 text-white rounded",children:(0,r.jsx)(p.A,{})})]})]})]})})})]})})}}},e=>{e.O(0,[9135,7210,1748,6061,6766,9234,9323,8441,5964,7358],()=>e(e.s=2578)),_N_E=e.O()}]);