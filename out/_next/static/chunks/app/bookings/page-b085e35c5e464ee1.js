(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8407],{71007:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},84853:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(95155),r=a(12115),l=a(931),n=a(78064),i=a(26597),o=a(85055),d=a(35317),c=a(56104),m=a(81586),u=a(69074),x=a(84616),h=a(40646),p=a(85339),g=a(54861),b=a(14186),v=a(71007),f=a(62525),j=a(59836),N=a(3898);let y=["AI Bustaan","Marina","TECOM","AL Muraqabat","IBN Batutta Mall"],w=["cash","card","tabby","tamara","apple pay","google pay","samsung wallet","paypal","american express","ewallet STC pay","bank transfer","cash on delivery","other"],k=["Komal","Shameem","Do Thi Kim","Alishba"],C={serviceId:"",serviceName:"",category:"",duration:30,price:0,quantity:1};function E(e){let[t,a]=e.split(":"),s=Number(t),r=s>=12?"PM":"AM";return 0===s&&(s=12),s>12&&(s-=12),"".concat(s,":").concat(a," ").concat(r)}let D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1440,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,s=[];for(let r=e;r<=t;r+=a)s.push(function(e){let t=Math.floor(e/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(a)}(r));return s}();function S(){var e,t;let[a,S]=(0,r.useState)([]),[A,T]=(0,r.useState)({}),[M,B]=(0,r.useState)(!0),[P,I]=(0,r.useState)(0),[G,q]=(0,r.useState)(0),[W,U]=(0,r.useState)([]),[F,J]=(0,r.useState)(""),[O,z]=(0,r.useState)("all"),[L,H]=(0,r.useState)(!1),[R,_]=(0,r.useState)(!1),[Q,K]=(0,r.useState)(!1),[Z,Y]=(0,r.useState)(!1),[$,V]=(0,r.useState)(""),[X,ee]=(0,r.useState)(null),[et,ea]=(0,r.useState)(!1),[es,er]=(0,r.useState)(null),[el,en]=(0,r.useState)(y[0]),[ei,eo]=(0,r.useState)(()=>(0,j.GP)(new Date,"yyyy-MM-dd")),[ed,ec]=(0,r.useState)("10:00"),[em,eu]=(0,r.useState)(""),[ex,eh]=(0,r.useState)("cash"),[ep,eg]=(0,r.useState)(""),[eb,ev]=(0,r.useState)(!1),[ef,ej]=(0,r.useState)(!1),[eN,ey]=(0,r.useState)("upcoming"),[ew,ek]=(0,r.useState)(""),[eC,eE]=(0,r.useState)([{...C}]),[eD,eS]=(0,r.useState)(""),[eA,eT]=(0,r.useState)(""),[eM,eB]=(0,r.useState)(1),[eP,eI]=(0,r.useState)(new Date().toISOString().split("T")[0]),[eG,eq]=(0,r.useState)("all"),[eW,eU]=(0,r.useState)([]),eF=async()=>{try{let e=(0,d.rJ)(c.db,"services"),t=(await (0,d.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));eU(t)}catch(e){console.error("Error fetching services:",e)}};(0,r.useEffect)(()=>{eF()},[]);let[eJ,eO]=(0,r.useState)([]),ez=Array.from(new Set(D.map(e=>e.split(":")[0]))).sort((e,t)=>Number(e)-Number(t)),[eL,eH]=(0,r.useState)(()=>{let e={};return ez.forEach(t=>e[t]=!0),e});(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,d.GG)((0,d.rJ)(c.db,"staff")),t=[];e.forEach(e=>{let a=e.data();(null==a?void 0:a.name)&&t.push(String(a.name))}),eO(t.length?t:k)}catch(e){eO(k)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{let e=(await (0,d.GG)((0,d.rJ)(c.db,"paymentMethods"))).docs.map(e=>({id:e.id,...e.data()}));U(e)}catch(e){console.error("Error fetching payment methods:",e)}})()},[]);let[eR,e_]=(0,r.useState)([]),[eQ,eK]=(0,r.useState)(""),[eZ,eY]=(0,r.useState)(""),[e$,eV]=(0,r.useState)(""),[eX,e0]=(0,r.useState)(""),[e1,e2]=(0,r.useState)(""),e5=(0,r.useMemo)(()=>Array.from(new Set(a.map(e=>e.bookingTime).filter(Boolean))).sort(),[a]);(0,r.useEffect)(()=>{let e=async()=>{try{await (0,d.GG)((0,d.rJ)(c.db,"staff"))}catch(e){}};(async()=>{try{let e=await (0,d.GG)((0,d.rJ)(c.db,"branches")),t=[];e.forEach(e=>{let a=e.data();(null==a?void 0:a.name)&&t.push(String(a.name))}),e_(t)}catch(e){console.error("Error loading branches:",e),e_(y)}})(),e()},[]),(0,r.useEffect)(()=>{let e=(0,d.P)((0,d.rJ)(c.db,"bookings"),(0,d.My)("createdAt","desc")),t=(0,d.aQ)(e,e=>{S(e.docs.map(e=>{var t,a,s,r,l,n,i;let o,d=e.data();return o=(null==(t=d.bookingDate)?void 0:t.toDate)?d.bookingDate.toDate():"string"==typeof d.bookingDate?new Date(d.bookingDate):(null==(a=d.bookingDate)?void 0:a.seconds)?new Date(1e3*d.bookingDate.seconds):new Date,{id:e.id,userId:d.userId||"",customerName:d.customerName||"",services:d.services||[],bookingDate:o,bookingTime:d.bookingTime||"",branch:d.branch||"",staff:(null==(s=d.staff)?void 0:s.trim())||(null==(r=d.staffName)?void 0:r.trim())||"Unassigned",totalPrice:d.totalPrice||0,totalDuration:d.totalDuration||0,status:d.status||"upcoming",paymentMethod:d.paymentMethod||"cash",emailConfirmation:d.emailConfirmation||!1,smsConfirmation:d.smsConfirmation||!1,createdAt:(null==(l=d.createdAt)?void 0:l.toDate)?d.createdAt.toDate():new Date,updatedAt:(null==(n=d.updatedAt)?void 0:n.toDate)?d.updatedAt.toDate():new Date,remarks:null!=(i=d.remarks)?i:null,customerEmail:d.customerEmail||"",source:d.source||(d.bookingDate?"mobile":"web"),loyaltyPointsEarned:d.loyaltyPointsEarned||0,loyaltyPointsUsed:d.loyaltyPointsUsed||0,tipAmount:d.tipAmount||0,rawData:d,discount:d.discount||0}})),B(!1)});return()=>t()},[]),(0,r.useEffect)(()=>{(async()=>{let e=(0,d.rJ)(c.db,"services");eU((await (0,d.GG)(e)).docs.map(e=>({id:e.id,...e.data()})))})()},[]),(0,r.useEffect)(()=>{(async()=>{let e=(0,d.P)((0,d.rJ)(c.db,"users")),t=await (0,d.GG)(e),a={};t.docs.forEach(e=>{let t=e.data();a[e.id]={id:e.id,name:t.name||t.displayName||"Unknown User",email:t.email||"",phone:t.phone||t.phoneNumber||""}}),T(a)})()},[]);let e4=a.filter(e=>{let t=F.toLowerCase(),a=e.customerName.toLowerCase().includes(t)||e.branch.toLowerCase().includes(t)||e.services.some(e=>e.serviceName.toLowerCase().includes(t)),s="all"===O||e.status===O,r=!eQ||""===eQ||e.branch===eQ,l=!eZ||""===eZ||!!e.staff&&e.staff===eZ,n=!e$||""===e$||(0,j.GP)(e.bookingDate,"yyyy-MM-dd")===e$,i=!eX||""===eX||e.customerName.toLowerCase().includes(eX.toLowerCase()),o=!e1||""===e1||e.bookingTime===e1;return a&&s&&r&&l&&n&&i&&o}),e3=async e=>{try{let t=e.userId||(0,o.A)();await (0,d.gS)((0,d.rJ)(c.db,"invoices"),{...e,userId:t,bookingId:e.id,createdAt:new Date}),console.log("Invoice saved to Firebase with userId:",t)}catch(e){console.error("Error saving invoice:",e)}},e6=()=>{en(y[0]),eo((0,j.GP)(new Date,"yyyy-MM-dd")),ec("10:00"),eu(""),eh("cash"),eg(""),ev(!1),ej(!1),ey("upcoming"),ek(""),eE([{...C}]),eS(""),ee(null),eT(""),I(""),q("")},e7=(e,t)=>{eL[t.split(":")[0]]&&(e6(),ek(e),ec(t),eo(eP),H(!0))};(0,r.useEffect)(()=>{if(L&&X){let s=a.find(e=>e.id===X);if(s){var e,t;q(null!=(e=s.discount)?e:0),I(null!=(t=s.tipAmount)?t:0)}}},[L,X]);let e8=(e,t,a)=>{eE(s=>s.map((s,r)=>{if(r!==e)return s;if("serviceName"===t){let e=eW.find(e=>e.name===a);if(e)return{...s,serviceName:a,duration:e.duration||0,price:e.price||0,category:e.category||s.category}}return{...s,[t]:a}}))},e9={totalPrice:(t=eC).reduce((e,t)=>e+(Number(t.price)||0)*(Number(t.quantity)||0),0),totalDuration:t.reduce((e,t)=>e+(Number(t.duration)||0)*(Number(t.quantity)||0),0)},te=async()=>{let e=em.trim()?ei?ed?el?ew?0===eC.length?"Add at least one service":eC.every(e=>e.serviceName.trim().length>0)?eL[ed.split(":")[0]]?null:"Selected time falls into a disabled hour":"Each service must have a name":"Staff is required":"Branch is required":"Service time is required":"Service date is required":"Customer name is required";if(e)return void alert(e);try{K(!0);let e={userId:(0,o.A)(),customerName:em.trim(),services:eC.map(e=>({...e,price:Number(e.price)||0,duration:Number(e.duration)||0,quantity:Number(e.quantity)||0})),bookingDate:d.Dc.fromDate(new Date(ei+"T00:00:00")),bookingTime:ed,branch:el,customerEmail:eA.trim(),staff:ew||null,totalPrice:e9.totalPrice,totalDuration:e9.totalDuration,status:eN,paymentMethod:"custom"===ex?ep:ex,emailConfirmation:eb,smsConfirmation:ef,updatedAt:(0,d.O5)(),remarks:eD||null,tipAmount:Number(P)||0,discount:Number(G)||0};if(X){let t=(0,d.H9)(c.db,"bookings",X);await (0,d.mZ)(t,e)}else await (0,d.gS)((0,d.rJ)(c.db,"bookings"),{...e,createdAt:(0,d.O5)()});H(!1),e6()}catch(e){console.error("Error saving booking:",e),alert("Failed to save booking. Check console for details.")}finally{K(!1)}},tt=async()=>{if(X&&confirm("Delete this booking? This action cannot be undone."))try{Y(!0),await (0,d.kd)((0,d.H9)(c.db,"bookings",X)),H(!1),e6()}catch(e){console.error("Error deleting booking:",e),alert("Failed to delete booking.")}finally{Y(!1)}};(0,r.useMemo)(()=>{let e=new Date(eP+"T00:00:00");return e4.filter(t=>{let a=(0,N.r)(t.bookingDate,e),s="all"===eG||t.branch===eG;return a&&s})},[e4,eP,eG]),(0,r.useMemo)(()=>{let e={};return D.forEach(t=>{e[t]={},eJ.forEach(a=>e[t][a]=[]),e[t].Unassigned=[]}),e4.forEach(t=>{var a,s,r;let l;if(t.bookingDate instanceof Date)l=t.bookingDate;else if("string"==typeof t.bookingDate)l=new Date(t.bookingDate);else{if(null==(a=t.bookingDate)||!a.seconds)return void console.error("Invalid bookingDate:",t.bookingDate);l=new Date(1e3*t.bookingDate.seconds)}let n=(0,j.GP)(l,"yyyy-MM-dd")===eP,i="all"===eG||t.branch===eG,o=!!eL[null!=(r=null==(s=t.bookingTime)?void 0:s.split(":")[0])?r:""];if(!n||!i||!o)return;let d=t.bookingTime,c=t.staff&&eJ.includes(t.staff)?t.staff:"Unassigned";e[d]||(e[d]={}),e[d][c]||(e[d][c]=[]),e[d][c].push(t)}),e},[e4,eP,eG,eJ,eL]);let ta=e=>{er({...e,tip:e.tipAmount||0,discount:e.discount||0,totalPrice:e.totalPrice||0}),ea(!0)},ts=async()=>{let e=document.getElementById("invoice-content");if(!e)return;let t=await (0,n.$E)(e,{cacheBust:!0}),a=new i.Ay({orientation:"p",unit:"mm",format:[150,180]}),s=140*e.offsetHeight/e.offsetWidth;a.addImage(t,"PNG",5,5,140,s),a.save("invoice_".concat((null==es?void 0:es.id)||Date.now(),".pdf")),await e3(es)};return(new Date().toISOString().split("T")[0],M)?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"}),(0,s.jsx)("span",{className:"ml-3 text-pink-600",children:"Loading bookings..."})]})})}):(0,s.jsx)(l.A,{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"max-w-6xl mx-auto dark:text-white ",children:[(0,s.jsxs)("div",{className:"relative mb-8 overflow-hidden rounded-2xl bg-gradient-to-br from-purple-600 via-pink-600 to-blue-600 animate-gradient-x",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,s.jsx)("div",{className:"relative px-8 py-12",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 animate-float",children:(0,s.jsx)(u.A,{className:"w-8 h-8 text-white animate-pulse-slow"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl lg:text-5xl font-bold text-white mb-2 animate-fade-in",children:"Bookings Management"}),(0,s.jsx)("div",{className:"h-1 w-32 bg-gradient-to-r from-yellow-400 to-pink-400 rounded-full animate-slide-up"})]})]}),(0,s.jsx)("p",{className:"text-white/90 text-lg max-w-2xl leading-relaxed animate-fade-in-delay",children:"Streamline your appointment scheduling with our comprehensive booking management system. Track, organize, and optimize all customer appointments effortlessly."}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-white/80 text-sm animate-slide-down",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,s.jsx)("span",{children:"Real-time Updates"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),(0,s.jsx)("span",{children:"Multi-branch Support"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),(0,s.jsx)("span",{children:"Smart Scheduling"})]})]})]}),(0,s.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 animate-float-delay",children:(0,s.jsxs)("button",{onClick:()=>{e6(),H(!0)},className:"group relative px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 animate-bounce-gentle",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-600 to-teal-700 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),(0,s.jsx)("span",{children:"Add Schedule"})]}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"})]})})]})}),(0,s.jsx)("div",{className:"absolute top-4 right-4 w-20 h-20 bg-white/10 rounded-full animate-float"}),(0,s.jsx)("div",{className:"absolute bottom-4 left-4 w-16 h-16 bg-white/5 rounded-full animate-float-delay"}),(0,s.jsx)("div",{className:"absolute top-1/2 right-1/4 w-12 h-12 bg-white/5 rounded-full animate-bounce-subtle"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"w-full flex flex-wrap items-center gap-3 mb-4 bg-white/80 dark:bg-slate-800/60 p-4 rounded-2xl shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs block mb-1",children:"Branch"}),(0,s.jsxs)("select",{value:eQ,onChange:e=>eK(e.target.value),className:"border rounded-lg px-3 py-2",children:[(0,s.jsx)("option",{value:"",children:"All Branches"}),(eR.length?eR:y).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs block mb-1",children:"Staff"}),(0,s.jsxs)("select",{value:eZ,onChange:e=>eY(e.target.value),className:"border rounded-lg px-3 py-2",children:[(0,s.jsx)("option",{value:"",children:"All Staff"}),eJ.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs block mb-1",children:"Date"}),(0,s.jsx)("input",{type:"date",value:e$,onChange:e=>eV(e.target.value),className:"border rounded-lg px-3 py-2"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,s.jsx)("label",{className:"text-xs block mb-1",children:"Customer"}),(0,s.jsx)("input",{type:"text",placeholder:"Search customer",value:eX,onChange:e=>e0(e.target.value),className:"border rounded-lg px-3 py-2 w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs block mb-1",children:"Time"}),(0,s.jsxs)("select",{value:e1,onChange:e=>e2(e.target.value),className:"border rounded-lg px-3 py-2",children:[(0,s.jsx)("option",{value:"",children:"All Times"}),e5.map(e=>(0,s.jsxs)("option",{value:e,children:[E(e)," (",e,")"]},e))]})]}),(0,s.jsx)("div",{className:"ml-auto self-end",children:(0,s.jsx)("button",{onClick:()=>{eK(""),eY(""),eV(""),e0(""),e2("")},className:"px-3 py-2 bg-gray-100 rounded-md text-sm hover:bg-gray-200",children:"Clear Filters"})})]})}),(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-50 via-white to-purple-50 border border-white/20 shadow-xl backdrop-blur-sm p-6 mb-6 w-[1000px] animate-fade-in",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-pink-500/5"}),(0,s.jsx)("div",{className:"relative mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg animate-float",children:(0,s.jsx)(u.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Schedule Dashboard & Controls"}),(0,s.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-indigo-200 via-purple-200 to-transparent"})]})}),(0,s.jsxs)("div",{className:"relative mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-r from-blue-500 to-cyan-600 shadow-md animate-pulse-slow",children:(0,s.jsx)(h.A,{className:"w-4 h-4 text-white"})}),(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Booking Statistics"}),(0,s.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-blue-200 to-transparent"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-blue-50 via-white to-blue-100 border border-blue-200/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-cyan-500/5"}),(0,s.jsx)("div",{className:"relative p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-lg shadow-md group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)(u.A,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-600 group-hover:text-blue-700 transition-colors duration-300",children:"Total Bookings"}),(0,s.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:e4.length})]})]})})]}),(0,s.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-green-50 via-white to-emerald-100 border border-green-200/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/5 to-emerald-500/5"}),(0,s.jsx)("div",{className:"relative p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg shadow-md group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)(h.A,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-600 group-hover:text-green-700 transition-colors duration-300",children:"Upcoming"}),(0,s.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:e4.filter(e=>"upcoming"===e.status).length})]})]})})]}),(0,s.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-amber-50 via-white to-yellow-100 border border-amber-200/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 to-yellow-500/5"}),(0,s.jsx)("div",{className:"relative p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-r from-amber-500 to-yellow-600 rounded-lg shadow-md group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)(p.A,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-600 group-hover:text-amber-700 transition-colors duration-300",children:"Past"}),(0,s.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-yellow-600 bg-clip-text text-transparent",children:e4.filter(e=>"past"===e.status).length})]})]})})]}),(0,s.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-red-50 via-white to-rose-100 border border-red-200/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/5 to-rose-500/5"}),(0,s.jsx)("div",{className:"relative p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-r from-red-500 to-rose-600 rounded-lg shadow-md group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)(g.A,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-600 group-hover:text-red-700 transition-colors duration-300",children:"Cancelled"}),(0,s.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-red-600 to-rose-600 bg-clip-text text-transparent",children:e4.filter(e=>"cancelled"===e.status).length})]})]})})]})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-r from-amber-500 to-orange-600 shadow-md animate-pulse-slow",children:(0,s.jsx)(b.A,{className:"w-4 h-4 text-white"})}),(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Available Hours"}),(0,s.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-amber-200 to-transparent"})]}),(0,s.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-6 lg:grid-cols-8 gap-2",children:ez.map((e,t)=>(0,s.jsxs)("label",{className:"group relative cursor-pointer animate-fade-in-delay",style:{animationDelay:"".concat(50*t,"ms")},children:[(0,s.jsx)("input",{type:"checkbox",checked:!!eL[e],onChange:t=>eH(a=>({...a,[e]:t.target.checked})),className:"sr-only"}),(0,s.jsxs)("div",{className:"\n                      relative px-3 py-2 rounded-xl text-xs font-medium text-center transition-all duration-300 transform\n                      ".concat(eL[e]?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg scale-105 animate-bounce-gentle":"bg-white/60 text-gray-600 border border-gray-200 hover:bg-gray-50 hover:scale-105","\n                      group-hover:shadow-xl\n                    "),children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[eL[e]&&(0,s.jsx)(h.A,{className:"w-3 h-3 animate-spin-slow"}),(0,s.jsx)("span",{children:E("".concat(e,":00"))})]}),(0,s.jsx)("div",{className:"\n                        absolute -top-1 -right-1 w-3 h-3 rounded-full transition-all duration-300\n                        ".concat(eL[e]?"bg-green-400 animate-ping":"bg-gray-300 opacity-0 group-hover:opacity-100","\n                      ")})]})]},e))}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,s.jsx)("button",{onClick:()=>eH(Object.fromEntries(ez.map(e=>[e,!0]))),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105 animate-fade-in-delay-2",children:"Enable All"}),(0,s.jsx)("button",{onClick:()=>eH(Object.fromEntries(ez.map(e=>[e,!1]))),className:"px-4 py-2 bg-gradient-to-r from-red-500 to-rose-600 text-white text-xs rounded-lg hover:from-red-600 hover:to-rose-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105 animate-fade-in-delay-3",children:"Disable All"})]})]}),(0,s.jsx)("div",{className:"absolute top-2 right-2 w-16 h-16 bg-gradient-to-br from-indigo-400/20 to-purple-400/20 rounded-full animate-float-delay"}),(0,s.jsx)("div",{className:"absolute bottom-2 left-2 w-12 h-12 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full animate-bounce-subtle"})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"relative group",children:(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-0 group-focus-within:opacity-100 transition-opacity duration-300 pointer-events-none"})})}),(0,s.jsx)("div",{className:"absolute top-2 right-2 w-16 h-16 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full animate-float-delay"}),(0,s.jsx)("div",{className:"absolute bottom-2 left-2 w-12 h-12 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full animate-bounce-subtle"})]}),(0,s.jsxs)("div",{className:"  relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-50 via-white to-gray-100 border border-white/20 shadow-2xl backdrop-blur-sm mb-10  animate-fade-in",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/5 via-purple-500/5 to-pink-500/5"}),(0,s.jsxs)("div",{className:"relative p-6 border-b border-gray-200/50 bg-gradient-to-r from-gray-50 to-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg animate-float",children:(0,s.jsx)(u.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Schedule Board"}),(0,s.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-indigo-200 via-purple-200 to-transparent"})]}),(0,s.jsx)("div",{className:"absolute top-2 right-2 w-12 h-12 bg-gradient-to-br from-indigo-400/20 to-purple-400/20 rounded-full animate-bounce-subtle"})]}),(0,s.jsxs)("div",{className:"relative overflow-x-auto w-full",children:[(0,s.jsx)("div",{className:"w-full relative",children:(0,s.jsxs)("div",{className:"grid sticky top-0 z-20",style:{gridTemplateColumns:"180px repeat(".concat(eJ.length,",  200px)")},children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white border-b border-gray-600 px-4 py-4 font-bold sticky left-0 z-30 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"w-4 h-4"}),"Time"]})}),eJ.map((e,t)=>(0,s.jsx)("div",{className:"bg-gradient-to-r ".concat(t%2==0?"from-blue-500 to-indigo-600":"from-purple-500 to-pink-600"," text-white border-b border-white/20 px-4 py-4 font-bold text-center shadow-lg animate-fade-in-delay"),style:{animationDelay:"".concat(100*t,"ms")},children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(v.A,{className:"w-4 h-4"}),e]})},e))]})}),(0,s.jsx)("div",{children:D.map(e=>{let t=!!eL[e.split(":")[0].padStart(2,"0")];return t?(0,s.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"180px repeat(".concat(eJ.length,", 200px)")},children:[(0,s.jsx)("div",{className:"sticky left-0 z-10 bg-gray-50 border-t border-b px-4 py-3 font-medium",children:E(e)}),eJ.map(a=>{let r=e=>{let t=new Date(e);return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},l=new Date,n=new Date;n.setDate(l.getDate()-1);let i=[r(n),r(l)],o=e4.filter(t=>{let s=r(t.bookingDate),l=e=>{if(!e)return"";let[t,a]=e.split(":");a||(a="00");let s=e.toLowerCase(),r=s.includes("pm"),l=s.includes("am"),n=parseInt(t=t.replace(/\D/g,""),10);return r&&12!==n&&(n+=12),l&&12===n&&(n=0),"".concat(n.toString().padStart(2,"0"),":").concat(a.substring(0,2))},[n,o]=l(t.bookingTime).split(":").map(Number),d=60*n+o,c=d+(t.totalDuration||30),[m,u]=l(e).split(":").map(Number),x=60*m+u;return(!t.staff||t.staff===a)&&i.includes(s)&&x>=d&&x<c});return(0,s.jsx)("div",{className:"border-t border-b border-l px-2 py-2 min-h-[64px] ".concat(t?"":"bg-gray-50 opacity-70 pointer-events-none"),onClick:s=>{t&&0===o.length&&e7(a,e)},children:(0,s.jsxs)("div",{className:"space-y-2",children:[o.map(e=>(0,s.jsxs)("button",{onClick:t=>{var a,s;t.stopPropagation(),ee(e.id),H(!0),en(e.branch||y[0]),eo((0,j.GP)(e.bookingDate,"yyyy-MM-dd")),ec(e.bookingTime||"10:00"),eu(e.customerName||""),eh(e.paymentMethod||"cash"),ev(!!e.emailConfirmation),ej(!!e.smsConfirmation),ey(e.status||"upcoming"),ek(e.staff||""),eE(e.services&&e.services.length>0?e.services.map(e=>({serviceId:e.serviceId||"",serviceName:e.serviceName||"",category:e.category||"",duration:Number(e.duration)||0,price:Number(e.price)||0,quantity:Number(e.quantity)||1})):[{...C}]),eS(e.remarks||""),eT(e.customerEmail||""),I(null!=(a=e.tipAmount)?a:0),q(null!=(s=e.discount)?s:0)},className:"w-full text-left text-xs rounded-md border px-2 py-2 hover:shadow transition ".concat((e=>{switch(e){case"upcoming":return"bg-emerald-50 border-emerald-300 text-emerald-800";case"past":return"bg-gray-50 border-gray-300 text-gray-700";case"cancelled":return"bg-rose-50 border-rose-300 text-rose-800 line-through";default:return"bg-slate-50 border-slate-300 text-slate-800"}})(e.status)),title:"".concat(e.customerName," @ ").concat(e.bookingTime),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"font-semibold truncate",children:e.customerName}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),ta(e)},className:"text-xs px-2 py-0.5 rounded bg-indigo-100 text-indigo-700",title:"Generate Invoice",children:"Invoice"}),(0,s.jsx)("span",{className:"text-[11px] opacity-80",children:E(e.bookingTime)})]})]}),(0,s.jsx)("div",{className:"truncate text-[12px]",children:e.services.map(e=>e.serviceName).join(", ")}),(0,s.jsxs)("div",{className:"flex items-center text-[11px] opacity-80 mt-1",children:[(0,s.jsx)(b.A,{className:"w-3 h-3 mr-1"}),E(e.bookingTime)," • ",e.totalDuration,"m"]}),(0,s.jsxs)("div",{className:"flex items-center text-[11px] opacity-80 mt-1",children:[(0,s.jsx)(m.A,{className:"w-3 h-3 mr-1"}),e.paymentMethod||"cash"]})]},e.id)),0===o.length&&t&&(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)("button",{className:"text-[11px] text-emerald-700 hover:text-emerald-900 underline",onClick:()=>e7(a,e),children:"Add here"})}),0===o.length&&!t&&(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-400",children:"Disabled"})]})},"".concat(e,"-").concat(a))})]},e):null})})]})]}),0===e4.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(u.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No bookings found"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:F||"all"!==O?"Try adjusting your search or filter criteria.":"No bookings have been made yet."})]})]}),L&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 z-50 overflow-y-auto h-full w-full",children:(0,s.jsx)("div",{className:"relative top-10 mx-auto w-11/12 md:w-4/5 lg:w-3/4 xl:w-2/3",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl border",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:X?"Edit Schedule":"Add Schedule"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[X&&(0,s.jsxs)("button",{onClick:tt,disabled:Z,className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-60",title:"Delete booking",children:[(0,s.jsx)(f.A,{className:"w-4 h-4"}),"Delete"]}),X&&(0,s.jsx)("button",{onClick:()=>{let e=a.find(e=>e.id===X);e&&ta(e)},className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-white bg-indigo-600 hover:bg-indigo-700",title:"Generate Invoice",children:"Invoice"}),(0,s.jsx)("button",{onClick:()=>{H(!1),e6()},className:"text-gray-400 hover:text-gray-600",title:"Close",children:(0,s.jsx)(g.A,{className:"w-6 h-6"})})]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Branch"}),(0,s.jsx)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:el,onChange:e=>en(e.target.value),children:y.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Customer Email"}),(0,s.jsx)("input",{type:"email",placeholder:"Customer email",className:"mt-1 w-full border rounded-md px-3 py-2",value:eA,onChange:e=>eT(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsxs)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:$,onChange:e=>V(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Select One"}),Array.from(new Set(eW.map(e=>e.category))).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Staff"}),(0,s.jsxs)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:ew,onChange:e=>ek(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Select One"}),eJ.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),(0,s.jsxs)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:ex,onChange:e=>{eh(e.target.value),"custom"!==e.target.value&&eg("")},children:[W.length>0?W.map(e=>(0,s.jsx)("option",{value:e.name||e.method||e.title||"",children:(e.name||e.method||e.title||"").toUpperCase()},e.id)):w.map(e=>(0,s.jsx)("option",{value:e,children:e.toUpperCase()},e)),(0,s.jsx)("option",{value:"custom",children:"Custom"})]}),"custom"===ex&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Custom Payment Method"}),(0,s.jsx)("input",{type:"text",className:"mt-1 w-full border rounded-md px-3 py-2",placeholder:"Enter custom payment method",value:ep,onChange:e=>eg(e.target.value)})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Service Date"}),(0,s.jsx)("input",{type:"date",className:"mt-1 w-full border rounded-md px-3 py-2",value:ei,onChange:e=>eo(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Time Slot"}),(0,s.jsx)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:ed,onChange:e=>ec(e.target.value),children:D.filter(e=>!!eL[e.split(":")[0]]).map(e=>(0,s.jsx)("option",{value:e,children:E(e)},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Customer"}),(0,s.jsx)("input",{type:"text",placeholder:"Customer name",className:"mt-1 w-full border rounded-md px-3 py-2",value:em,onChange:e=>eu(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"border rounded-lg",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-4 py-3 bg-gray-50 text-xs font-semibold",children:[(0,s.jsx)("div",{className:"col-span-4",children:"Service"}),(0,s.jsx)("div",{className:"col-span-2",children:"Duration (min)"}),(0,s.jsx)("div",{className:"col-span-2",children:"Price"}),(0,s.jsx)("div",{className:"col-span-1",children:"Qty"}),(0,s.jsx)("div",{className:"col-span-1 text-right",children:"—"})]}),eC.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-4 py-3 border-t",children:[(0,s.jsx)("div",{className:"col-span-4",children:(0,s.jsxs)("select",{className:"w-full border rounded-md px-3 py-2",value:e.serviceName,onChange:e=>e8(t,"serviceName",e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Select a service"}),eW.filter(e=>!$||e.category===$).map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("input",{type:"number",min:0,className:"w-full border rounded-md px-3 py-2",value:e.duration,onChange:e=>e8(t,"duration",Number(e.target.value||0))})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("input",{type:"number",min:0,step:"0.01",className:"w-full border rounded-md px-3 py-2",value:e.price,onChange:e=>e8(t,"price",Number(e.target.value||0))})}),(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)("input",{type:"number",min:1,className:"w-full border rounded-md px-3 py-2",value:e.quantity,onChange:e=>e8(t,"quantity",Number(e.target.value||1))})}),(0,s.jsx)("div",{className:"col-span-1 flex justify-end items-center",children:eC.length>1&&(0,s.jsx)("button",{onClick:()=>{eE(e=>e.filter((e,a)=>a!==t))},className:"p-2 rounded hover:bg-red-50 text-red-600",title:"Remove",children:(0,s.jsx)(f.A,{className:"w-4 h-4"})})})]},t)),(0,s.jsx)("div",{className:"px-4 py-3 border-t space-y-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tip Amount (AED)"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",className:"mt-1 w-full border rounded-md px-3 py-2",placeholder:"Enter tip",value:P||"",onChange:e=>I(Number(e.target.value)||0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Discount (%)"}),(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",className:"mt-1 w-full border rounded-md px-3 py-2",placeholder:"Enter discount percentage",value:G||"",onChange:e=>q(Number(e.target.value)||0)})]}),(0,s.jsx)("div",{className:"flex flex-col justify-end",children:(0,s.jsxs)("div",{className:"text-sm font-semibold text-gray-800",children:["Final Total: AED"," ",(e9.totalPrice+(P||0)-(G||0)).toFixed(2)]})})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks (optional)"}),(0,s.jsx)("textarea",{className:"mt-1 w-full border rounded-md px-3 py-2 min-h-[80px]",value:eD,onChange:e=>eS(e.target.value)})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Application Status"}),(0,s.jsxs)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:eN,onChange:e=>ey(e.target.value),children:[(0,s.jsx)("option",{value:"upcoming",children:"Approved (Upcoming)"}),(0,s.jsx)("option",{value:"past",children:"Completed (Past)"}),(0,s.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>{H(!1),e6()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",disabled:Q||Z,children:"Close"}),(0,s.jsx)("button",{onClick:te,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700 disabled:opacity-60",disabled:Q||Z,children:Q?X?"Updating...":"Saving...":X?"Update":"Save"})]})]})})}),es&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-4 transition-opacity ".concat(et?"opacity-100 visible":"opacity-0 invisible"),children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl p-4 relative max-h-[90vh] overflow-auto",children:[(0,s.jsx)("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",onClick:()=>ea(!1),title:"Close",children:"✖"}),(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 rounded mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Select Branch Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Brand Email"}),(0,s.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:es.businessEmail,onChange:e=>er(t=>({...t,businessEmail:e.target.value})),children:[(0,s.jsx)("option",{value:"select email",children:"select email"}),(0,s.jsx)("option",{value:"branch@mirrosalon.ae",children:"branch@mirrosalon.ae"}),(0,s.jsx)("option",{value:"marina@mirrosalon.ae",children:"marina@mirrosalon.ae"}),(0,s.jsx)("option",{value:"ibnbattuta@mirrosalon.ae",children:"ibnbattuta@mirrosalon.ae"}),(0,s.jsx)("option",{value:"albustan@mirrosalon.ae",children:"albustan@mirrosalon.ae"}),(0,s.jsx)("option",{value:"tecom@mirrosalon.ae",children:"tecom@mirrosalon.ae"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Brand Phone"}),(0,s.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:es.businessPhone,onChange:e=>er(t=>({...t,businessPhone:e.target.value})),children:[(0,s.jsx)("option",{value:"select number",children:"select number"}),(0,s.jsx)("option",{value:"+971 56 300 5629",children:"Marina Phone: +971 56 300 5629"}),(0,s.jsx)("option",{value:"+971 54 321 0758",children:"IBN Battuta Mall Phone: +971 54 321 0758"}),(0,s.jsx)("option",{value:"+971 50 545 8263",children:"AI Bustaan Phone: +971 50 545 8263"}),(0,s.jsx)("option",{value:"+971 4 568 6219",children:"TECOM Phone: +971 4 568 6219"}),(0,s.jsx)("option",{value:"+971 4 269 1449",children:"AI Muraqqabat Phone: +971 4 269 1449"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Brand Address"}),(0,s.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:es.businessAddress,onChange:e=>er(t=>({...t,businessAddress:e.target.value})),children:[(0,s.jsx)("option",{value:"select address",children:"select address"}),(0,s.jsx)("option",{value:"Marina Jannah Hotel, Marina - Ground Floor, Shop - 2 Jannah Pl - Dubai Marina - Dubai - United Arab Emirates",children:"Marina Jannah Hotel, Dubai Marina"}),(0,s.jsx)("option",{value:"IBN Battuta Mall, Metro link area - Sheikh Zayed Rd - Dubai - United Arab Emirates",children:"IBN Battuta Mall, Dubai"}),(0,s.jsx)("option",{value:"Al Bustan Centre & Residence Al Nahda Road, Qusais, 20107 - Dubai - United Arab Emirates",children:"AI Bustaan, Dubai"}),(0,s.jsx)("option",{value:"New API Building - Ground Floor - beside Fahad Tower 1 - Barsha Heights - Dubai - United Arab Emirates",children:"TECOM, Dubai"}),(0,s.jsx)("option",{value:"Dominos Pizza Building, Buhaleeba plaza - M02 - Al Muraqqabat - Dubai - United Arab Emirates",children:"AI Muraqqabat, Dubai"})]})]})]})]}),(0,s.jsxs)("div",{id:"invoice-content",className:"p-4 bg-white rounded-lg shadow-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-indigo-700",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,title:e.target.innerText})),children:es.title||"Invoice Receipt"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Booking ID:"," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,id:e.target.innerText})),children:es.id})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"font-semibold",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,businessName:e.target.innerText})),children:es.businessName||"MirrorsBeautyLounge"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,businessEmail:e.target.innerText})),children:es.businessEmail}),(0,s.jsx)("p",{className:"text-sm text-gray-500",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,businessPhone:e.target.innerText})),children:es.businessPhone}),(0,s.jsx)("p",{className:"text-sm text-gray-500",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,businessAddress:e.target.innerText})),children:es.businessAddress})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Customer:"})," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,customerName:e.target.innerText})),children:es.customerName})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,customerEmail:e.target.innerText})),children:es.customerEmail||"N/A"})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Phone:"})," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,customerPhone:e.target.innerText})),children:(null==(e=A[es.userId])?void 0:e.phone)||"-"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Branch:"})," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,branch:e.target.innerText})),children:es.branch})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Date:"})," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,bookingDate:e.target.innerText})),children:(0,j.GP)(es.bookingDate,"dd MMM yyyy")})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Time:"})," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,bookingTime:e.target.innerText})),children:E(es.bookingTime)})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Staff:"})," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,staff:e.target.innerText})),children:es.staff||"-"})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Payment Method:"})," ",(0,s.jsx)("span",{contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,paymentMethod:e.target.innerText})),children:es.paymentMethod||"cash"})]})]})]}),(0,s.jsx)("div",{className:"overflow-hidden rounded border",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3 text-left",children:"Service"}),(0,s.jsx)("th",{className:"p-3 text-center",children:"Qty"}),(0,s.jsx)("th",{className:"p-3 text-right",children:"Price"}),(0,s.jsx)("th",{className:"p-3 text-right",children:"Total"})]})}),(0,s.jsx)("tbody",{children:es.services.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"p-3",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(a=>{let s=[...a.services];return s[t].serviceName=e.target.innerText,{...a,services:s}}),children:e.serviceName}),(0,s.jsx)("td",{className:"p-3 text-center",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(a=>{let s=[...a.services];return s[t].quantity=Number(e.target.innerText)||0,{...a,services:s}}),children:e.quantity}),(0,s.jsxs)("td",{className:"p-3 text-right",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(a=>{let s=[...a.services];return s[t].price=Number(e.target.innerText)||0,{...a,services:s}}),children:["AED ",Number(e.price).toFixed(2)]}),(0,s.jsxs)("td",{className:"p-3 text-right",children:["AED ",(Number(e.price)*Number(e.quantity)).toFixed(2)]})]},t))})]})}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col items-end gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between w-64",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,s.jsxs)("span",{className:"font-semibold",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,totalPrice:Number(e.target.innerText.replace(/[^0-9.]/g,""))||0})),children:["AED ",Number(es.totalPrice||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between w-64",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Tip Added:"}),(0,s.jsxs)("span",{className:"font-semibold text-green-600",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,tip:Number(e.target.innerText.replace(/[^0-9.]/g,""))||0})),children:["AED ",Number(es.tip||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between w-64",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Discount Applied:"}),(0,s.jsxs)("span",{className:"font-semibold text-red-600",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,discount:Number(e.target.innerText.replace(/[^0-9.]/g,""))||0})),children:["AED ",Number(es.discount||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between w-64 border-t pt-2 text-base font-bold",children:[(0,s.jsx)("span",{children:"Grand Total (AED):"}),(0,s.jsxs)("span",{children:["AED"," ",(Number(es.totalPrice||0)+Number(es.tip||0)-Number(es.discount||0)).toFixed(2)]})]})]}),(0,s.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",contentEditable:R,suppressContentEditableWarning:!0,onBlur:e=>er(t=>({...t,footerText:e.target.innerText})),children:es.footerText||"Thank you for your booking! We look forward to serving you."})]}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>ea(!1),className:"px-4 py-2 bg-gray-100 rounded-md",children:"Close"}),(0,s.jsx)("button",{onClick:()=>_(!R),className:"px-4 py-2 rounded-md ".concat(R?"bg-green-600 text-white":"bg-blue-600 text-white"),children:R?"Save Invoice":"Edit Invoice"}),(0,s.jsx)("button",{onClick:ts,className:"px-4 py-2 bg-pink-600 text-white rounded-md",children:"Download PDF"})]})]})})]})})}},87502:(e,t,a)=>{Promise.resolve().then(a.bind(a,84853))}},e=>{e.O(0,[9135,7210,3930,5033,1748,9836,6373,7672,9323,931,8441,5964,7358],()=>e(e.s=87502)),_N_E=e.O()}]);