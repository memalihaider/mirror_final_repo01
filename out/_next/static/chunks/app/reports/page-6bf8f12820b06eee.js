(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5022],{6771:(e,t,s)=>{Promise.resolve().then(s.bind(s,79680))},56104:(e,t,s)=>{"use strict";s.d(t,{AU:()=>h,Gg:()=>u,IG:()=>x,db:()=>o,j2:()=>m});var a=s(23915),l=s(71906),i=s(35317),n=s(77505),d=s(24903);let r={apiKey:"AIzaSyBYQA66rKOPrb4kce-hYCTYAbGKanVGbZ8",authDomain:"mirrorsbeautylounge-7c5ff.firebaseapp.com",projectId:"mirrorsbeautylounge-7c5ff",storageBucket:"mirrorsbeautylounge-7c5ff.firebasestorage.app",messagingSenderId:"1029530532506",appId:"1:1029530532506:web:2fa18cc521b2524e5afd23",measurementId:"G-GMWQSDP9JW"},c=null,o=null,x=null,m=null;function h(){if(!c)try{c=(0,a.initializeApp)(r),o=(0,i.aU)(c),x=(0,n.c7)(c),m=(0,d.getAuth)(c);try{(0,l.P5)(c)}catch(e){console.warn("Firebase Analytics initialization failed:",e)}}catch(e){console.error("Firebase initialization failed:",e),m=null}}function u(){return null!==c}h()},79680:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(95155),l=s(12115),i=s(26597),n=s(76118),d=s(35317),r=s(56104),c=s(47924),o=s(71007),x=s(44940),m=s(40646),h=s(54861),u=s(87327),p=s(59836),y=s(53231),j=s(32944),N=s(72132),g=s(84423),b=s(72794);let v=["Al Bustan","Marina","TECOM","AL Muraqabat","IBN Batutta Mall"],f=["cash","card","bank_transfer","cobone","groupon","pay_by_link","paypal","tabby","tamara","extra_pay_mode_1","extra_pay_mode_2","user_balance","redeem"],w=["Komal","Shameem","Do Thi Kim","Alishba"];function k(){var e,t,s,k,S,M,C,F,P,D,T,$,A,G,_;let[E,B]=(0,l.useState)([]),[I,z]=(0,l.useState)(!0),[H,O]=(0,l.useState)("bookings"),[L,U]=(0,l.useState)(""),[Y,R]=(0,l.useState)("all"),[W,q]=(0,l.useState)(!1),[K,Q]=(0,l.useState)(!1),[J,Z]=(0,l.useState)(!1),[V,X]=(0,l.useState)(null),[ee,et]=(0,l.useState)(v[0]),[es,ea]=(0,l.useState)(()=>(0,p.GP)(new Date,"yyyy-MM-dd")),[el,ei]=(0,l.useState)("10:00"),[en,ed]=(0,l.useState)(""),[er,ec]=(0,l.useState)("cash"),[eo,ex]=(0,l.useState)(!1),[em,eh]=(0,l.useState)(!1),[eu,ep]=(0,l.useState)(""),[ey,ej]=(0,l.useState)("upcoming"),[eN,eg]=(0,l.useState)([]);eN.length;let[eb,ev]=(0,l.useState)("this_month"),[ef,ew]=(0,l.useState)(()=>(0,p.GP)((0,y.w)(new Date),"yyyy-MM-dd")),[ek,eS]=(0,l.useState)(()=>(0,p.GP)((0,j.p)(new Date),"yyyy-MM-dd")),[eM,eC]=(0,l.useState)("all"),[eF,eP]=(0,l.useState)("this_month");(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,d.GG)((0,d.rJ)(r.db,"staff")),t=[];e.forEach(e=>{let s=e.data();(null==s?void 0:s.name)&&t.push(String(s.name))}),eg(t.length?t:w)}catch(e){eg(w)}})()},[]),(0,l.useEffect)(()=>{let e=(0,d.P)((0,d.rJ)(r.db,"bookings"),(0,d.My)("createdAt","desc")),t=(0,d.aQ)(e,e=>{B(e.docs.map(e=>{var t,s,a,l;let i=e.data();return{id:e.id,userId:i.userId||"",customerName:i.customerName||"",customerEmail:i.customerEmail||"",services:i.services||[],bookingDate:(null==(t=i.bookingDate)?void 0:t.toDate())||new Date,bookingTime:i.bookingTime||"",branch:i.branch||"",staff:i.staffName||i.staff||"â€”",totalPrice:Number(i.totalPrice)||0,totalDuration:Number(i.totalDuration)||0,status:i.status||"upcoming",paymentMethod:i.paymentMethod||"cash",grossSales:Number(i.grossSales)||void 0,discount:Number(i.discount)||void 0,refunds:Number(i.refunds)||void 0,adjustments:Number(i.adjustments)||void 0,tax:Number(i.tax)||void 0,tips:Number(i.tips)||void 0,excludedPayments:Number(i.excludedPayments)||void 0,inHand:Number(i.inHand)||void 0,paymentDetails:i.paymentDetails||void 0,emailConfirmation:!!i.emailConfirmation,smsConfirmation:!!i.smsConfirmation,createdAt:(null==(s=i.createdAt)?void 0:s.toDate())||new Date,updatedAt:(null==(a=i.updatedAt)?void 0:a.toDate())||new Date,remarks:null!=(l=i.remarks)?l:null}})),z(!1)});return()=>t()},[]),(0,l.useEffect)(()=>{let e=new Date;switch(eb){case"today":ew((0,p.GP)(e,"yyyy-MM-dd")),eS((0,p.GP)(e,"yyyy-MM-dd"));break;case"yesterday":let t=(0,N.e)(e,1);ew((0,p.GP)(t,"yyyy-MM-dd")),eS((0,p.GP)(t,"yyyy-MM-dd"));break;case"this_week":ew((0,p.GP)((0,g.k)(e,{weekStartsOn:1}),"yyyy-MM-dd")),eS((0,p.GP)((0,b.$)(e,{weekStartsOn:1}),"yyyy-MM-dd"));break;case"this_month":ew((0,p.GP)((0,y.w)(e),"yyyy-MM-dd")),eS((0,p.GP)((0,j.p)(e),"yyyy-MM-dd"))}},[eb]);let eD=(0,l.useMemo)(()=>{let e=new Date(ef+"T00:00:00"),t=new Date(ek+"T23:59:59");return E.filter(s=>{let a=s.bookingDate,l="all"===eM||s.branch===eM;return a>=e&&a<=t&&l})},[E,ef,ek,eM]),eT=(0,l.useMemo)(()=>{let e={sales:0,grossSales:0,discount:0,refunds:0,adjustments:0,tax:0,totalSalesWithTax:0,tips:0,collection:0,excludedPayments:0,inHandCollection:0,paymentMethods:{}};return f.forEach(t=>e.paymentMethods[t]=0),eD.forEach(t=>{var s,a,l,i,n,d,r,c;let o=Number(null!=(s=t.grossSales)?s:t.totalPrice)||0,x=Number(null!=(a=t.discount)?a:0)||0,m=Number(null!=(l=t.refunds)?l:0)||0,h=Number(null!=(i=t.adjustments)?i:0)||0,u=Number(null!=(n=t.tax)?n:0)||0,p=Number(null!=(d=t.tips)?d:0)||0,y=Number(null!=(r=t.excludedPayments)?r:0)||0,j=o-x-m+h;e.grossSales+=o,e.discount+=x,e.refunds+=m,e.adjustments+=h,e.tax+=u,e.tips+=p,e.excludedPayments+=y,e.sales+=j,e.totalSalesWithTax+=j+u,e.collection+=j+p;let N=Number(null!=(c=t.inHand)?c:Math.max(0,j+p-y));e.inHandCollection+=N;let g=(t.paymentMethod||"cash").toLowerCase();e.paymentMethods[g]||(e.paymentMethods[g]=0),t.paymentDetails&&"object"==typeof t.paymentDetails?Object.entries(t.paymentDetails).forEach(t=>{let[s,a]=t,l=s.toLowerCase();e.paymentMethods[l]=(e.paymentMethods[l]||0)+Number(a||0)}):e.paymentMethods[g]=(e.paymentMethods[g]||0)+Number(j+p||0)}),e},[eD]),e$=(0,l.useMemo)(()=>{let e=L.toLowerCase();return E.filter(t=>{let s=t.customerName.toLowerCase().includes(e)||t.branch.toLowerCase().includes(e)||t.services.some(t=>t.serviceName.toLowerCase().includes(e)),a="all"===Y||t.status===Y;return s&&a})},[E,L,Y]),eA=()=>{et(v[0]),ep(""),ea((0,p.GP)(new Date,"yyyy-MM-dd")),ei("10:00"),ed(""),ec("cash"),ex(!1),eh(!1),ej("upcoming"),setStaff(""),X(null)},eG=e=>{X(e.id),et(e.branch||v[0]),ea((0,p.GP)(e.bookingDate,"yyyy-MM-dd")),ei(e.bookingTime||"10:00"),ed(e.customerName||""),ep(e.customerEmail||""),ec(e.paymentMethod||"cash"),ex(!!e.emailConfirmation),eh(!!e.smsConfirmation),ej(e.status||"upcoming"),setStaff(e.staff||""),q(!0)},e_=async(e,t)=>{try{let s=(0,d.H9)(r.db,"bookings",e);await (0,d.mZ)(s,{status:t,updatedAt:(0,d.O5)()})}catch(e){console.error("Error updating booking status:",e),alert("Failed to update status.")}};return I?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto"}),(0,a.jsx)("p",{className:"text-center mt-2",children:"Loading..."})]}):(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Bookings & Finance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Merged bookings UI + Finance reports (realtime from Firestore)"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>O("bookings"),className:"px-3 py-2 rounded ".concat("bookings"===H?"bg-pink-600 text-white":"bg-gray-100"),children:"Bookings"}),(0,a.jsx)("button",{onClick:()=>O("finance"),className:"px-3 py-2 rounded ".concat("finance"===H?"bg-pink-600 text-white":"bg-gray-100"),children:"Finance Reports"})]})]}),"bookings"===H&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 flex gap-4 items-center",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{value:L,onChange:e=>U(e.target.value),className:"pl-10 pr-3 py-2 w-full border rounded",placeholder:"Search by customer, branch, service..."})]}),(0,a.jsxs)("select",{value:Y,onChange:e=>R(e.target.value),className:"border rounded px-3 py-2",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,a.jsx)("option",{value:"past",children:"Past"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Customer"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Services"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Date & Time"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Staff"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Branch"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Payment"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Invoice"})]})}),(0,a.jsx)("tbody",{children:e$.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>eG(e),children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-pink-100 flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"w-5 h-5 text-pink-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.customerName}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.customerEmail||"No email"})]})]})}),(0,a.jsxs)("td",{className:"px-4 py-3",children:[e.services.slice(0,2).map((e,t)=>(0,a.jsxs)("div",{children:[e.serviceName," ",e.quantity>1&&"(x".concat(e.quantity,")")]},t)),e.services.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.services.length-2," more"]})]}),(0,a.jsxs)("td",{className:"px-4 py-3",children:[(0,a.jsx)("div",{children:(0,p.GP)(e.bookingDate,"MMM dd, yyyy")}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.bookingTime})]}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.staff||"â€”"}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.branch}),(0,a.jsxs)("td",{className:"px-4 py-3",children:["$",e.totalPrice.toFixed(2)," ",(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.paymentMethod})]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs",children:e.status})}),(0,a.jsx)("td",{className:"px-4 py-3",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>eG(e),title:"Edit",className:"text-emerald-700",children:(0,a.jsx)(x.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>e_(e.id,"past"),title:"Mark as completed",className:"text-green-600",children:(0,a.jsx)(m.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>e_(e.id,"cancelled"),title:"Cancel",className:"text-red-600",children:(0,a.jsx)(h.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>e_(e.id,"upcoming"),title:"Upcoming",className:"text-blue-600",children:(0,a.jsx)(u.A,{className:"w-4 h-4"})})]})}),(0,a.jsx)("td",{className:"px-4 py-3",onClick:e=>e.stopPropagation(),children:(0,a.jsx)("button",{onClick:()=>(e=>{var t;let s=new i.Ay({unit:"pt",format:"a4",orientation:"portrait"});s.setFontSize(18),s.text("Invoice",40,40),s.setFontSize(12),s.text("Customer: ".concat(e.customerName),40,70),s.text("Email: ".concat(e.customerEmail||"N/A"),40,90),s.text("Booking Date: ".concat((0,p.GP)(e.bookingDate,"MMM dd, yyyy")),40,110),s.text("Time: ".concat(e.bookingTime),40,130),s.text("Branch: ".concat(e.branch),40,150),s.text("Staff: ".concat(e.staff||"â€”"),40,170);let a=e.services.map((e,t)=>[t+1,e.serviceName,e.quantity,"$".concat(Number(e.price).toFixed(2)),"$".concat((Number(e.price)*Number(e.quantity)).toFixed(2))]);(0,n.Ay)(s,{head:[["#","Service","Qty","Unit Price","Total"]],body:a,startY:200,theme:"grid",styles:{fontSize:10},margin:{left:40,right:40}});let l=(null==(t=s.lastAutoTable)?void 0:t.finalY)||200;s.setFontSize(12),s.text("Total Duration: ".concat(e.totalDuration," min"),40,l+25),s.text("Total Price: $".concat(e.totalPrice.toFixed(2)),40,l+45),s.save("Invoice_".concat(e.customerName.replace(/\s+/g,"_"),".pdf"))})(e),className:"px-2 py-1 bg-pink-600 text-white rounded",children:"Invoice"})})]},e.id))})]})}),0===e$.length&&(0,a.jsx)("div",{className:"text-center py-10 text-gray-500",children:"No bookings found."}),W&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-700 bg-opacity-50 z-50 flex items-start justify-center overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg w-11/12 md:w-3/4 mt-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,a.jsx)("h3",{className:"font-semibold",children:V?"Edit Booking":"Add Booking"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[V&&(0,a.jsx)("button",{onClick:async()=>{if(confirm("Delete?")){Z(!0);try{await (0,d.kd)((0,d.H9)(r.db,"bookings",V)),q(!1),eA()}catch(e){console.error(e),alert("Delete failed")}finally{Z(!1)}}},className:"px-3 py-1 bg-red-600 text-white rounded",children:"Delete"}),(0,a.jsx)("button",{onClick:()=>{q(!1),eA()},className:"px-3 py-1",children:"Close"})]})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Branch"}),(0,a.jsx)("select",{value:ee,onChange:e=>et(e.target.value),className:"w-full border rounded p-2",children:v.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Staff"}),(0,a.jsx)("select",{value:"",onChange:()=>{},className:"w-full border rounded p-2",children:(0,a.jsx)("option",{children:"â€”"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Payment"}),(0,a.jsx)("select",{value:er,onChange:e=>ec(e.target.value),className:"w-full border rounded p-2",children:["cash","card"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Service Date"}),(0,a.jsx)("input",{type:"date",value:es,onChange:e=>ea(e.target.value),className:"w-full border rounded p-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Time"}),(0,a.jsx)("input",{type:"time",value:el,onChange:e=>ei(e.target.value),className:"w-full border rounded p-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Customer Name"}),(0,a.jsx)("input",{value:en,onChange:e=>ed(e.target.value),className:"w-full border rounded p-2"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"px-3 py-2 bg-gray-100 rounded",onClick:()=>{q(!1),eA()},children:"Close"}),(0,a.jsx)("button",{className:"px-3 py-2 bg-emerald-600 text-white rounded",onClick:async()=>{alert("Use back-end saving as needed")},children:"Save"})]})]})]})})]}),"finance"===H&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Branch"}),(0,a.jsxs)("select",{value:eM,onChange:e=>eC(e.target.value),className:"w-full border rounded p-2",children:[(0,a.jsx)("option",{value:"all",children:"All Branches"}),v.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Timeline"}),(0,a.jsxs)("select",{value:eb,onChange:e=>ev(e.target.value),className:"w-full border rounded p-2",children:[(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,a.jsx)("option",{value:"this_week",children:"This Week"}),(0,a.jsx)("option",{value:"this_month",children:"This Month"}),(0,a.jsx)("option",{value:"custom",children:"Custom"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"From"}),(0,a.jsx)("input",{type:"date",value:ef,onChange:e=>{ew(e.target.value),ev("custom")},className:"w-full border rounded p-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"To"}),(0,a.jsx)("input",{type:"date",value:ek,onChange:e=>{eS(e.target.value),ev("custom")},className:"w-full border rounded p-2"})]}),(0,a.jsx)("div",{className:"md:col-span-4 flex justify-end gap-2 mt-2",children:(0,a.jsx)("button",{onClick:()=>{let e=new i.Ay({unit:"pt",format:"a4",orientation:"landscape"});e.setFontSize(16),e.text("Finance Report",40,40);let t=["Branch: ".concat(eM),"From: ".concat(ef),"To: ".concat(ek)];e.setFontSize(10),e.text(t.join("   "),40,60);let s=eD.map(e=>{var t,s,a,l,i,n;let d=Number(null!=(t=e.grossSales)?t:e.totalPrice)||0,r=Number(null!=(s=e.discount)?s:0)||0,c=Number(null!=(a=e.refunds)?a:0)||0,o=Number(null!=(l=e.adjustments)?l:0)||0,x=Number(null!=(i=e.tax)?i:0)||0,m=Number(null!=(n=e.tips)?n:0)||0,h=d-r-c+o;return[e.customerName,(0,p.GP)(e.bookingDate,"yyyy-MM-dd"),e.bookingTime,e.branch,e.staff||"â€”","$".concat(d.toFixed(2)),"$".concat(r.toFixed(2)),"$".concat(c.toFixed(2)),"$".concat(o.toFixed(2)),"$".concat(h.toFixed(2)),"$".concat(x.toFixed(2)),"$".concat((h+x).toFixed(2)),"$".concat(m.toFixed(2)),e.paymentMethod]});(0,n.Ay)(e,{head:[["Customer","Date","Time","Branch","Staff","Gross","Discount","Refunds","Adjustments","Net Sales","Tax","Total Sales","Tips","Payment Method"]],body:s,startY:80,styles:{fontSize:9},margin:{left:20,right:20}}),e.save("Finance_Report_".concat(ef,"_to_").concat(ek,".pdf"))},className:"px-3 py-2 bg-pink-600 text-white rounded",children:"Export PDF"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Gross Sales"}),(0,a.jsxs)("div",{className:"text-xl font-semibold",children:["$",(null==(e=eT.grossSales)?void 0:e.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Net Sales"}),(0,a.jsxs)("div",{className:"text-xl font-semibold",children:["$",(null==(t=eT.sales)?void 0:t.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Tax"}),(0,a.jsxs)("div",{className:"text-xl font-semibold",children:["$",(null==(s=eT.tax)?void 0:s.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"In-Hand Collection"}),(0,a.jsxs)("div",{className:"text-xl font-semibold",children:["$",(null==(k=eT.inHandCollection)?void 0:k.toFixed(2))||"0.00"]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded shadow overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Metric / Payment Method"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Amount"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Sales (Net)"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(S=eT.sales)?void 0:S.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Gross Sales"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(M=eT.grossSales)?void 0:M.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Discount"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(C=eT.discount)?void 0:C.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Refunds"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(F=eT.refunds)?void 0:F.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Adjustments"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(P=eT.adjustments)?void 0:P.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Tax"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(D=eT.tax)?void 0:D.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Total Sales (Tax + Net)"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(T=eT.totalSalesWithTax)?void 0:T.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Tips"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==($=eT.tips)?void 0:$.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Collection (Sales + Tips)"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(A=eT.collection)?void 0:A.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"Excluded Payments"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(G=eT.excludedPayments)?void 0:G.toFixed(2))||"0.00"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"In-Hand Collection"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(null==(_=eT.inHandCollection)?void 0:_.toFixed(2))||"0.00"]})]}),Object.entries(eT.paymentMethods||{}).map(e=>{let[t,s]=e;return(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"px-4 py-2 capitalize",children:t.replace(/_/g," ")}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(Number(s)||0).toFixed(2)]})]},t)})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded shadow mt-6 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Customer"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Branch"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Gross"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Discount"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Refunds"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Adjust"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Net"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Tax"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Total"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"Tips"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left",children:"Payment"})]})}),(0,a.jsx)("tbody",{children:eD.map(e=>{var t,s,l,i,n,d;let r=Number(null!=(t=e.grossSales)?t:e.totalPrice)||0,c=Number(null!=(s=e.discount)?s:0)||0,o=Number(null!=(l=e.refunds)?l:0)||0,x=Number(null!=(i=e.adjustments)?i:0)||0,m=Number(null!=(n=e.tax)?n:0)||0,h=Number(null!=(d=e.tips)?d:0)||0,u=r-c-o+x;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>eG(e),children:[(0,a.jsx)("td",{className:"px-4 py-2",children:e.customerName}),(0,a.jsx)("td",{className:"px-4 py-2",children:(0,p.GP)(e.bookingDate,"yyyy-MM-dd")}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.branch}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",r.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",c.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",o.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",x.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",u.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",m.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",(u+m).toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",h.toFixed(2)]}),(0,a.jsx)("td",{className:"px-4 py-2 text-left",children:e.paymentMethod})]},e.id)})})]})})]})]})}}},e=>{e.O(0,[9135,7210,3930,5033,1748,6007,7324,8034,8441,5964,7358],()=>e(e.s=6771)),_N_E=e.O()}]);