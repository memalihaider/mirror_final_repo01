"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3116],{43116:(r,e,t)=>{t.d(e,{Ah:()=>d,CX:()=>G,Gz:()=>F,K7:()=>l,SN:()=>p,Ub:()=>y,VW:()=>z,YF:()=>n,Zn:()=>U,_i:()=>k,bU:()=>b,bm:()=>v,fl:()=>S,h1:()=>h,hs:()=>u,je:()=>g,kQ:()=>D,n$:()=>C,pv:()=>f,st:()=>s,w4:()=>c,ys:()=>m});var a=t(35317),o=t(56104);let i=null;(0,o.Gg)()&&o.db&&(i=(0,a.rJ)(o.db,"categories"));let n=r=>new Promise((e,t)=>{let a=new FileReader;a.onload=()=>{a.result?e(a.result):t(Error("Failed to convert file to base64"))},a.onerror=()=>t(Error("Error reading file")),a.readAsDataURL(r)}),c=function(r){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return new Promise((a,o)=>{let i=document.createElement("canvas"),n=i.getContext("2d"),c=new Image;c.onload=()=>{let r=Math.min(e/c.width,e/c.height);i.width=c.width*r,i.height=c.height*r,null==n||n.drawImage(c,0,0,i.width,i.height),a(i.toDataURL("image/jpeg",t))},c.onerror=()=>o(Error("Error loading image")),c.src=URL.createObjectURL(r)})},d=async r=>{try{var e;if(!i)throw Error("Categories collection not initialized");return(await (0,a.gS)(i,{name:r.name||"Unnamed Category",description:r.description||"",serviceCount:null!=(e=r.serviceCount)?e:0,color:r.color||"#ffffff",gender:r.gender||"unisex",branch:r.branch||"",imageBase64:r.imageBase64||"",createdAt:a.Dc.now(),updatedAt:a.Dc.now()})).id}catch(r){throw console.error("Error adding category:",r),r}},s=async(r,e)=>{try{if(!(0,o.Gg)()||!o.db)throw Error("Firebase is not configured");let t=(0,a.H9)(o.db,"categories",r);await (0,a.mZ)(t,{...e,branch:e.branch||"",updatedAt:a.Dc.now()})}catch(r){throw console.error("Error updating category:",r),r}},l=async r=>{try{if(!(0,o.Gg)()||!o.db)throw Error("Firebase is not configured");let e=(0,a.H9)(o.db,"categories",r);await (0,a.kd)(e)}catch(r){throw console.error("Error deleting category:",r),r}},g=(r,e)=>{if(!i)return()=>{};let t=(0,a.P)(i,(0,a.My)("createdAt","desc"));return(0,a.aQ)(t,e=>{r(e.docs.map(r=>({id:r.id,...r.data()})))},r=>{console.error("Error listening to categories:",r),e&&e(r)})},w=null;(0,o.Gg)()&&o.db&&(w=(0,a.rJ)(o.db,"services"));let h=async r=>{try{var e,t,o;if(!w)throw Error("Services collection not initialized");return(await (0,a.gS)(w,{name:r.name||"Unnamed Service",category:r.category||"",duration:null!=(e=r.duration)?e:0,price:null!=(t=r.price)?t:0,description:r.description||"",isActive:null==(o=r.isActive)||o,branch:r.branch||"",imageBase64:r.imageBase64||"",createdAt:a.Dc.now(),updatedAt:a.Dc.now()})).id}catch(r){throw console.error("Error adding service:",r),r}},b=async(r,e)=>{try{if(!(0,o.Gg)()||!o.db)throw Error("Firebase is not configured");let t=(0,a.H9)(o.db,"services",r);await (0,a.mZ)(t,{...e,branch:e.branch||"",updatedAt:a.Dc.now()})}catch(r){throw console.error("Error updating service:",r),r}},u=async r=>{try{if(!(0,o.Gg)()||!o.db)throw Error("Firebase is not configured");let e=(0,a.H9)(o.db,"services",r);await (0,a.kd)(e)}catch(r){throw console.error("Error deleting service:",r),r}},f=(r,e)=>{if(!w)return()=>{};let t=(0,a.P)(w,(0,a.My)("createdAt","desc"));return(0,a.aQ)(t,e=>{r(e.docs.map(r=>({id:r.id,...r.data()})))},r=>{console.error("Error listening to services:",r),e&&e(r)})},E=null;(0,o.Gg)()&&o.db&&(E=(0,a.rJ)(o.db,"branches"));let m=async r=>{if(!E)throw Error("Branches collection not initialized");return(await (0,a.gS)(E,{...r,createdAt:a.Dc.now(),updatedAt:a.Dc.now()})).id},y=async(r,e)=>{if(!o.db)throw Error("Firebase is not configured");let t=(0,a.H9)(o.db,"branches",r);await (0,a.mZ)(t,{...e,updatedAt:a.Dc.now()})},p=async r=>{if(!o.db)throw Error("Firebase is not configured");let e=(0,a.H9)(o.db,"branches",r);await (0,a.kd)(e)},v=r=>E?(0,a.aQ)(E,e=>{r(e.docs.map(r=>({id:r.id,...r.data()})))}):()=>{},A=null;(0,o.Gg)()&&o.db&&(A=(0,a.rJ)(o.db,"offers"));let D=async r=>{if(!A)throw Error("Offers collection not initialized");return(await (0,a.gS)(A,{...r,createdAt:a.Dc.now(),updatedAt:a.Dc.now()})).id},F=async(r,e)=>{if(!o.db)throw Error("Firebase is not configured");let t=(0,a.H9)(o.db,"offers",r);await (0,a.mZ)(t,{...e,updatedAt:a.Dc.now()})},k=async r=>{if(!o.db)throw Error("Firebase is not configured");let e=(0,a.H9)(o.db,"offers",r);await (0,a.kd)(e)},G=r=>A?(0,a.aQ)(A,e=>{r(e.docs.map(r=>({id:r.id,...r.data()})))}):()=>{},H=null;(0,o.Gg)()&&o.db&&(H=(0,a.rJ)(o.db,"referrals"));let C=async r=>{if(!H)throw Error("Referrals collection not initialized");return(await (0,a.gS)(H,{...r,createdAt:a.Dc.now()})).id},S=async(r,e)=>{if(!o.db)throw Error("Firebase is not configured");let t=(0,a.H9)(o.db,"referrals",r);await (0,a.mZ)(t,e)},U=async r=>{if(!o.db)throw Error("Firebase is not configured");let e=(0,a.H9)(o.db,"referrals",r);await (0,a.kd)(e)},z=r=>H?(0,a.aQ)(H,e=>{r(e.docs.map(r=>({id:r.id,...r.data()})))}):()=>{}}}]);